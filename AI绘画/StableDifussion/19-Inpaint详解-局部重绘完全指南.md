---
title: Inpaint è¯¦è§£ - å±€éƒ¨é‡ç»˜å®Œå…¨æŒ‡å—
date: 2025-12-04
tags:
  - Stable Diffusion
  - Inpaint
  - å±€éƒ¨é‡ç»˜
  - è’™ç‰ˆç»˜åˆ¶
  - AIç»˜ç”»
categories:
  - AIç»˜ç”»
---

# Inpaint è¯¦è§£ - å±€éƒ¨é‡ç»˜å®Œå…¨æŒ‡å—

## ğŸ¯ ä»€ä¹ˆæ˜¯ Inpaintï¼Ÿ

**Inpaint (å±€éƒ¨é‡ç»˜)** æ˜¯ Stable Diffusion æœ€ç²¾å‡†çš„å›¾åƒç¼–è¾‘åŠŸèƒ½ã€‚é€šè¿‡ç»˜åˆ¶è’™ç‰ˆï¼ˆMaskï¼‰ï¼Œä½ å¯ä»¥æŒ‡å®šå›¾åƒçš„æŸä¸ªåŒºåŸŸè¿›è¡Œé‡ç»˜ï¼Œè€Œä¿æŒå…¶ä»–åŒºåŸŸä¸å˜ã€‚

### æ ¸å¿ƒæ¦‚å¿µ

```mermaid
graph LR
    A[åŸå§‹å›¾åƒ] --> B[ç»˜åˆ¶è’™ç‰ˆ]
    B --> C[æŒ‡å®šé‡ç»˜åŒºåŸŸ]
    C --> D[AIå±€éƒ¨é‡ç»˜]
    D --> E[å…¶ä»–åŒºåŸŸä¸å˜]
    E --> F[å®Œç¾èåˆ]

    style C fill:#ff6b6b
    style F fill:#5cb85c
```

**Inpaint çš„åº”ç”¨åœºæ™¯ï¼š**
- ğŸ–Œï¸ **å±€éƒ¨ä¿®æ”¹**ï¼šæ¢è„¸ã€æ¢æœè£…ã€æ”¹å‘è‰²
- âœ¨ **ä¿®å¤ç¼ºé™·**ï¼šå»é™¤å¤šä½™æ‰‹æŒ‡ã€ä¿®æ­£é¢éƒ¨
- ğŸ¨ **æ·»åŠ å…ƒç´ **ï¼šåŠ é…é¥°ã€æ¢èƒŒæ™¯ç‰©ä½“
- ğŸ—‘ï¸ **åˆ é™¤ç‰©ä½“**ï¼šå»æ°´å°ã€ç§»é™¤ä¸è¦çš„å…ƒç´ 
- ğŸ”„ **é£æ ¼èåˆ**ï¼šå±€éƒ¨æ”¹å˜é£æ ¼

---

## ğŸ”¬ Inpaint vs img2img

### æŠ€æœ¯å¯¹æ¯”

```mermaid
graph TB
    subgraph "img2img"
        A1[å…¨å›¾ä¿®æ”¹] --> B1[æ— æ³•ç²¾ç¡®æ§åˆ¶<br/>ä¿®æ”¹ä½ç½®]
    end

    subgraph "Inpaint"
        A2[è’™ç‰ˆæŒ‡å®š] --> B2[ç²¾ç¡®æ§åˆ¶<br/>ä¿®æ”¹åŒºåŸŸ]
        B2 --> C2[å…¶ä»–åŒºåŸŸ<br/>å®Œå…¨ä¿ç•™]
    end

    style B1 fill:#ff6b6b
    style C2 fill:#5cb85c
```

| ç‰¹æ€§ | img2img | Inpaint |
|------|---------|---------|
| **ä¿®æ”¹èŒƒå›´** | å…¨å›¾ | å±€éƒ¨ï¼ˆè’™ç‰ˆåŒºåŸŸï¼‰|
| **ç²¾ç¡®åº¦** | ä½ | æé«˜ â­â­â­ |
| **ä¿ç•™åŸå›¾** | éƒ¨åˆ† | è’™ç‰ˆå¤–å®Œå…¨ä¿ç•™ |
| **éš¾åº¦** | ç®€å• | ä¸­ç­‰ |
| **é€‚ç”¨åœºæ™¯** | æ•´ä½“ä¿®æ”¹ | å±€éƒ¨ç¼–è¾‘ |

---

## ğŸ“ Inpaint ç•Œé¢ä»‹ç»

### WebUI Inpaint æ ‡ç­¾é¡µ

```java
// ä¸»è¦åŒºåŸŸ
1. Image è¾“å…¥åŒº
   - ä¸Šä¼ è¦ä¿®æ”¹çš„å›¾åƒ

2. Mask ç»˜åˆ¶åŒº
   - ç™½è‰²ç”»ç¬”: æ ‡è®°è¦é‡ç»˜çš„åŒºåŸŸ
   - é»‘è‰²æ©¡çš®: æ“¦é™¤è’™ç‰ˆ
   - ç¬”åˆ·å¤§å°è°ƒèŠ‚

3. å‚æ•°è®¾ç½®åŒº
   - Mask blur
   - Mask mode
   - Masked content
   - Inpaint area
   - Only masked padding

4. å…¶ä»–å¸¸è§„å‚æ•°
   - Denoising strength
   - Prompt / Negative
   - CFG, Steps, Sampler
```

---

## âš™ï¸ Inpaint æ ¸å¿ƒå‚æ•°è¯¦è§£

### 1. Mask Blurï¼ˆè’™ç‰ˆæ¨¡ç³Šï¼‰â­ é‡è¦

æ§åˆ¶è’™ç‰ˆè¾¹ç¼˜çš„æŸ”åŒ–ç¨‹åº¦ï¼Œå†³å®šé‡ç»˜åŒºåŸŸä¸åŸå›¾çš„è¿‡æ¸¡æ•ˆæœã€‚

```mermaid
graph LR
    A[Mask Blur = 0] --> B[ç¡¬è¾¹ç¼˜<br/>å¯è§æ¥ç¼ âŒ]
    C[Mask Blur = 4] --> D[æŸ”å’Œè¿‡æ¸¡<br/>æ¨è âœ…]
    E[Mask Blur = 16] --> F[è¿‡æ¸¡åŒºåŸŸå¤§<br/>å½±å“èŒƒå›´å¹¿]

    style D fill:#5cb85c
    style B fill:#ff6b6b
```

**å‚æ•°æŒ‡å—ï¼š**

```java
// èŒƒå›´: 0-64 åƒç´ 
Mask Blur = 0:
  - å®Œå…¨ç¡¬è¾¹
  - é€‚åˆ: è§„åˆ™å½¢çŠ¶ï¼ˆçŸ©å½¢é€‰æ¡†ï¼‰
  - é—®é¢˜: å®¹æ˜“çœ‹å‡ºæ¥ç¼

Mask Blur = 4:
  - è½»å¾®æŸ”åŒ–ï¼ˆæ¨èï¼‰âœ…
  - é€‚åˆ: å¤§éƒ¨åˆ†åœºæ™¯
  - æ•ˆæœ: è‡ªç„¶è¿‡æ¸¡

Mask Blur = 8-12:
  - ä¸­åº¦æŸ”åŒ–
  - é€‚åˆ: éœ€è¦æ›´å¹³æ»‘è¿‡æ¸¡
  - æ•ˆæœ: èåˆæ•ˆæœå¥½

Mask Blur = 16+:
  - å¼ºçƒˆæŸ”åŒ–
  - é€‚åˆ: å¤§èŒƒå›´ä¿®æ”¹
  - æ³¨æ„: å½±å“èŒƒå›´ä¼šæ‰©å¤§

// å®æˆ˜å»ºè®®
é¢éƒ¨ä¿®å¤: 4-8
æœè£…æ›´æ¢: 8-12
èƒŒæ™¯èåˆ: 12-16
å»é™¤ç‰©ä½“: 4-8
```

---

### 2. Mask Modeï¼ˆè’™ç‰ˆæ¨¡å¼ï¼‰

å®šä¹‰ä½ ç”»çš„è’™ç‰ˆä»£è¡¨"è¦é‡ç»˜"è¿˜æ˜¯"ä¸è¦é‡ç»˜"ã€‚

```java
// ä¸¤ç§æ¨¡å¼
Inpaint maskedï¼ˆé‡ç»˜è’™ç‰ˆå†…ï¼‰:
  - ç™½è‰²åŒºåŸŸ = é‡ç»˜ âœ…
  - é»‘è‰²åŒºåŸŸ = ä¿ç•™
  - é»˜è®¤æ¨¡å¼ï¼Œæœ€å¸¸ç”¨

Inpaint not maskedï¼ˆé‡ç»˜è’™ç‰ˆå¤–ï¼‰:
  - ç™½è‰²åŒºåŸŸ = ä¿ç•™
  - é»‘è‰²åŒºåŸŸ = é‡ç»˜
  - é€‚åˆ: ä¿æŠ¤ç‰¹å®šåŒºåŸŸ

// é€‰æ‹©å»ºè®®
æ—¥å¸¸ä½¿ç”¨: Inpaint maskedï¼ˆé»˜è®¤ï¼‰
åå‘æ“ä½œ: Inpaint not masked
```

---

### 3. Masked Contentï¼ˆè’™ç‰ˆå†…å®¹å¡«å……ï¼‰â­ å…³é”®

å†³å®šé‡ç»˜æ—¶è’™ç‰ˆåŒºåŸŸçš„åˆå§‹çŠ¶æ€ã€‚

```mermaid
graph TB
    A[Masked Content] --> B[Original<br/>ä¿ç•™åŸå›¾]
    A --> C[Fill<br/>å¡«å……é¢œè‰²]
    A --> D[Latent noise<br/>æ½œç©ºé—´å™ªå£°]
    A --> E[Latent nothing<br/>æ½œç©ºé—´é›¶å€¼]

    B --> F[è½»å¾®ä¿®æ”¹<br/>ä¿æŒç»†èŠ‚]
    C --> G[æ¸…ç©ºåé‡ç»˜<br/>é€‚åˆå»é™¤]
    D --> H[å®Œå…¨é‡ç»˜<br/>å¤§å¹…ä¿®æ”¹]
    E --> I[å¹³æ»‘è¿‡æ¸¡<br/>æ— ç¼èåˆ]

    style F fill:#5cb85c
    style H fill:#4ecdc4
```

**æ¨¡å¼è¯¦è§£ï¼š**

**Originalï¼ˆä¿ç•™åŸå›¾ï¼‰â­ æœ€å¸¸ç”¨**
```java
ç‰¹ç‚¹:
  - è’™ç‰ˆåŒºåŸŸä¿ç•™åŸå›¾ä¿¡æ¯
  - AI åœ¨åŸå›¾åŸºç¡€ä¸Šä¿®æ”¹

é€‚ç”¨åœºæ™¯:
  âœ… ä¿®å¤ç¼ºé™·ï¼ˆå¤šä½™æ‰‹æŒ‡ã€é¢éƒ¨é—®é¢˜ï¼‰
  âœ… è½»å¾®ä¿®æ”¹ï¼ˆæ¢å‘è‰²ã€è°ƒæ•´è¡¨æƒ…ï¼‰
  âœ… å±€éƒ¨ä¼˜åŒ–ï¼ˆæå‡ç»†èŠ‚è´¨é‡ï¼‰

Denoising å»ºè®®:
  0.3-0.5: ä¿ç•™å¤§éƒ¨åˆ†åŸå›¾ï¼Œè½»å¾®è°ƒæ•´
  0.6-0.7: é€‚åº¦ä¿®æ”¹

ç¤ºä¾‹:
  ä¿®å¤å¤šä½™æ‰‹æŒ‡:
    Masked content: Original
    Denoising: 0.4
    Prompt: five fingers, anatomically correct
```

**Fillï¼ˆå¡«å……é¢œè‰²ï¼‰**
```java
ç‰¹ç‚¹:
  - è’™ç‰ˆåŒºåŸŸå¡«å……å•è‰²
  - AI ä»ç©ºç™½å¼€å§‹ç”Ÿæˆ

é€‚ç”¨åœºæ™¯:
  âœ… å»é™¤ç‰©ä½“ï¼ˆæ°´å°ã€äººç‰©ã€æ‚ç‰©ï¼‰
  âœ… æ¸…ç©ºåŒºåŸŸåé‡ç»˜

Fill color: å¯é€‰é¢œè‰²ï¼ˆé»˜è®¤ç™½è‰²ï¼‰

Denoising å»ºè®®:
  0.9-1.0: å®Œå…¨é‡ç»˜

ç¤ºä¾‹:
  å»é™¤æ°´å°:
    Masked content: Fill
    Denoising: 1.0
    Prompt: clean background, seamless
```

**Latent noiseï¼ˆæ½œç©ºé—´å™ªå£°ï¼‰â­ å¤§æ”¹æ¨è**
```java
ç‰¹ç‚¹:
  - è’™ç‰ˆåŒºåŸŸå¡«å……éšæœºå™ªå£°
  - AI å®Œå…¨é‡æ–°ç”Ÿæˆ

é€‚ç”¨åœºæ™¯:
  âœ… æ·»åŠ æ–°å…ƒç´ ï¼ˆåŠ é…é¥°ã€åŠ ç‰©ä½“ï¼‰
  âœ… å¤§å¹…ä¿®æ”¹ï¼ˆæ¢æœè£…ã€æ¢èƒŒæ™¯ï¼‰
  âœ… åˆ›æ„ç”Ÿæˆ

Denoising å»ºè®®:
  0.8-1.0: å®Œå…¨é‡ç»˜

ç¤ºä¾‹:
  ç»™äººç‰©æ·»åŠ å¸½å­:
    Masked content: Latent noise
    Denoising: 0.95
    Prompt: red hat, detailed
```

**Latent nothingï¼ˆæ½œç©ºé—´é›¶å€¼ï¼‰**
```java
ç‰¹ç‚¹:
  - è’™ç‰ˆåŒºåŸŸå¡«å……é›¶å€¼
  - å¹³æ»‘è¿‡æ¸¡ï¼Œæ— ç¼èåˆ

é€‚ç”¨åœºæ™¯:
  âœ… å»é™¤ç‰©ä½“åå¹³æ»‘èƒŒæ™¯
  âœ… éœ€è¦ç‰¹åˆ«è‡ªç„¶çš„è¿‡æ¸¡

Denoising å»ºè®®:
  0.9-1.0

æŠ€å·§: è¾ƒå°‘ä½¿ç”¨ï¼Œå®éªŒæ€§é€‰é¡¹
```

---

### 4. Inpaint Areaï¼ˆé‡ç»˜å¤„ç†èŒƒå›´ï¼‰

å†³å®š AI å¤„ç†çš„ç”»å¸ƒå¤§å°ã€‚

```mermaid
graph LR
    A[Inpaint Area] --> B[Whole picture<br/>å¤„ç†æ•´å›¾]
    A --> C[Only masked<br/>ä»…å¤„ç†è’™ç‰ˆ]

    B --> D[æ…¢ä½†èåˆå¥½<br/>è€ƒè™‘å…¨å±€]
    C --> E[å¿«ä½†å¯èƒ½å¤±è°ƒ<br/>å­¤ç«‹å¤„ç†]

    style D fill:#5cb85c
```

**æ¨¡å¼å¯¹æ¯”ï¼š**

```java
// Whole pictureï¼ˆå¤„ç†æ•´å›¾ï¼‰â­ æ¨è
å·¥ä½œæ–¹å¼:
  - AI çœ‹åˆ°å®Œæ•´å›¾åƒ
  - è€ƒè™‘å…¨å±€ä¸Šä¸‹æ–‡
  - èåˆæ•ˆæœæ›´å¥½

ä¼˜ç‚¹:
  âœ… é‡ç»˜å†…å®¹ä¸æ•´ä½“åè°ƒ
  âœ… è‰²è°ƒã€å…‰å½±åŒ¹é…
  âœ… é€‚åˆå¤æ‚åœºæ™¯

ç¼ºç‚¹:
  âŒ é€Ÿåº¦è¾ƒæ…¢
  âŒ æ˜¾å­˜å ç”¨é«˜

é€‚ç”¨:
  - äººç‰©ä¿®æ”¹ï¼ˆä¿æŒæ•´ä½“é£æ ¼ï¼‰
  - åœºæ™¯ç¼–è¾‘ï¼ˆå…‰å½±ä¸€è‡´ï¼‰
  - æœ€ç»ˆè¾“å‡ºï¼ˆè´¨é‡ä¼˜å…ˆï¼‰

// Only maskedï¼ˆä»…å¤„ç†è’™ç‰ˆåŒºåŸŸï¼‰
å·¥ä½œæ–¹å¼:
  - ä»…å¤„ç†è’™ç‰ˆåŒºåŸŸ
  - ä¸è€ƒè™‘å¤–éƒ¨ä¸Šä¸‹æ–‡
  - é€Ÿåº¦å¿«

ä¼˜ç‚¹:
  âœ… é€Ÿåº¦å¿«
  âœ… æ˜¾å­˜å ç”¨ä½

ç¼ºç‚¹:
  âŒ å¯èƒ½ä¸å‘¨å›´ä¸åè°ƒ
  âŒ å­¤ç«‹æ„Ÿ

é€‚ç”¨:
  - å¿«é€Ÿæµ‹è¯•
  - ç®€å•ä¿®æ”¹
  - å°èŒƒå›´ç¼–è¾‘
```

---

### 5. Only Masked Paddingï¼ˆè’™ç‰ˆæ‰©å±•ï¼‰

å½“é€‰æ‹© "Only masked" æ—¶ï¼Œå‘å¤–æ‰©å±•çš„åƒç´ æ•°ã€‚

```java
// å‚æ•°èŒƒå›´: 0-256 åƒç´ 
// ä»…åœ¨ Inpaint area = Only masked æ—¶ç”Ÿæ•ˆ

Padding = 0:
  - ä¸¥æ ¼é™åˆ¶åœ¨è’™ç‰ˆå†…
  - å¯èƒ½è¿‡äºå­¤ç«‹

Padding = 32ï¼ˆæ¨èï¼‰:
  - é€‚åº¦æ‰©å±•
  - ä¿è¯ä¸Šä¸‹æ–‡ä¿¡æ¯

Padding = 64-128:
  - å¤§èŒƒå›´æ‰©å±•
  - æ›´å¥½èåˆ

// å»ºè®®
å¿«é€Ÿæµ‹è¯•: 32
æœ€ç»ˆè¾“å‡º: ä½¿ç”¨ Whole picture æ¨¡å¼
```

---

### 6. Denoising Strengthï¼ˆé‡ç»˜å¼ºåº¦ï¼‰

ä¸ img2img ç›¸åŒï¼Œä½†åœ¨ Inpaint ä¸­æ›´å…³é”®ã€‚

```java
// é…åˆ Masked Content çš„æ¨èå€¼
Masked Content: Original
  Denoising: 0.3-0.5ï¼ˆè½»åº¦ä¿®æ”¹ï¼‰

Masked Content: Fill
  Denoising: 0.9-1.0ï¼ˆå®Œå…¨é‡ç»˜ï¼‰

Masked Content: Latent noise
  Denoising: 0.8-1.0ï¼ˆå¤§å¹…é‡ç»˜ï¼‰

// é€šç”¨å»ºè®®
ä¿®å¤ç¼ºé™·: 0.4
è½»å¾®è°ƒæ•´: 0.5
é€‚åº¦ä¿®æ”¹: 0.6-0.7
å®Œå…¨é‡ç»˜: 0.9+
```

---

## ğŸ¨ å®æˆ˜åº”ç”¨æ¡ˆä¾‹

### æ¡ˆä¾‹1ï¼šä¿®å¤å¤šä½™æ‰‹æŒ‡

```java
// é—®é¢˜: ç”Ÿæˆçš„äººç‰©æœ‰6æ ¹æ‰‹æŒ‡
æ“ä½œæ­¥éª¤:
  1. ä¸Šä¼ å›¾åƒåˆ° Inpaint
  2. ç”¨ç™½è‰²ç”»ç¬”æ¶‚æŠ¹å¤šä½™æ‰‹æŒ‡åŒºåŸŸ
  3. è®¾ç½®å‚æ•°

å‚æ•°é…ç½®:
  Mask blur: 8
  Mask mode: Inpaint masked
  Masked content: Original
  Inpaint area: Whole picture
  Denoising: 0.45

Prompt:
  detailed hand, five fingers,
  anatomically correct, natural pose

Negative:
  extra fingers, bad hands, mutation,
  <badhandv4>

æŠ€å·§:
  - è’™ç‰ˆè¦å®Œå…¨è¦†ç›–é—®é¢˜åŒºåŸŸ
  - å¯é…åˆ ADetailer æ‰‹éƒ¨æ£€æµ‹
  - å¤šæ¬¡å°è¯•æ‰¾åˆ°æœ€ä½³ Denoising
```

---

### æ¡ˆä¾‹2ï¼šæ›´æ¢æœè£…

```java
// ç›®æ ‡: ç»™äººç‰©æ¢ä¸€å¥—è¡£æœ
æ“ä½œæ­¥éª¤:
  1. ç²¾ç¡®æ¶‚æŠ¹æœè£…åŒºåŸŸ
  2. é¿å¼€é¢éƒ¨å’Œæ‰‹éƒ¨

å‚æ•°é…ç½®:
  Mask blur: 12
  Mask mode: Inpaint masked
  Masked content: Latent noise
  Inpaint area: Whole picture
  Denoising: 0.9

Prompt:
  red evening dress, elegant, silk fabric,
  detailed clothing, high quality

Negative:
  [åŸnegative] + wrong clothing

æŠ€å·§:
  - Latent noise é€‚åˆå®Œå…¨æ›¿æ¢
  - Mask blur é«˜ä¸€ç‚¹ä¿è¯èåˆ
  - Inpaint area ç”¨ Whole picture ä¿æŒå…‰å½±ä¸€è‡´
```

---

### æ¡ˆä¾‹3ï¼šå»é™¤æ°´å°

```java
// ç›®æ ‡: åˆ é™¤å›¾ç‰‡å³ä¸‹è§’æ°´å°
æ“ä½œæ­¥éª¤:
  1. æ¶‚æŠ¹æ°´å°åŒºåŸŸ
  2. ç¨å¾®æ‰©å¤§è’™ç‰ˆèŒƒå›´

å‚æ•°é…ç½®:
  Mask blur: 8
  Mask mode: Inpaint masked
  Masked content: Fill (æˆ– Latent nothing)
  Inpaint area: Whole picture
  Denoising: 1.0

Prompt:
  clean background, seamless, natural,
  no text, no watermark

Negative:
  text, watermark, logo, signature

æŠ€å·§:
  - Fill æˆ– Latent nothing éƒ½å¯ä»¥
  - Denoising è¦é«˜ (0.95-1.0)
  - ç¡®ä¿æç¤ºè¯æè¿°å‘¨å›´èƒŒæ™¯
```

---

### æ¡ˆä¾‹4ï¼šä¿®æ”¹é¢éƒ¨è¡¨æƒ…

```java
// ç›®æ ‡: æŠŠä¸¥è‚ƒè¡¨æƒ…æ”¹ä¸ºå¾®ç¬‘
æ“ä½œæ­¥éª¤:
  1. æ¶‚æŠ¹å˜´éƒ¨åŠå‘¨å›´åŒºåŸŸ
  2. ä¿ç•™çœ¼ç›å’Œå…¶ä»–é¢éƒ¨ç‰¹å¾

å‚æ•°é…ç½®:
  Mask blur: 4
  Mask mode: Inpaint masked
  Masked content: Original
  Inpaint area: Whole picture
  Denoising: 0.5

Prompt:
  smiling, gentle smile, happy expression,
  natural face, detailed

Negative:
  serious, frowning, distorted face

æŠ€å·§:
  - Original ä¿ç•™é¢éƒ¨ç»“æ„
  - Denoising é€‚ä¸­é¿å…å˜è„¸
  - è’™ç‰ˆèŒƒå›´ä¸è¦å¤ªå¤§
```

---

### æ¡ˆä¾‹5ï¼šæ·»åŠ é…é¥°

```java
// ç›®æ ‡: ç»™äººç‰©æ·»åŠ çœ¼é•œ
æ“ä½œæ­¥éª¤:
  1. æ¶‚æŠ¹çœ¼ç›åŠå‘¨å›´åŒºåŸŸ
  2. è’™ç‰ˆç•¥å¤§äºçœ¼é•œé¢„æœŸä½ç½®

å‚æ•°é…ç½®:
  Mask blur: 8
  Mask mode: Inpaint masked
  Masked content: Latent noise
  Inpaint area: Whole picture
  Denoising: 0.85

Prompt:
  wearing glasses, black frame glasses,
  detailed, realistic, on face

Negative:
  no glasses, distorted

æŠ€å·§:
  - Latent noise é€‚åˆæ·»åŠ æ–°å…ƒç´ 
  - å¯èƒ½éœ€è¦å¤šæ¬¡ç”Ÿæˆé€‰æ‹©æœ€ä½³
  - æç¤ºè¯æ˜ç¡®æè¿°çœ¼é•œæ ·å¼
```

---

### æ¡ˆä¾‹6ï¼šèƒŒæ™¯æ›¿æ¢

```java
// ç›®æ ‡: ä¿ç•™äººç‰©ï¼Œæ›´æ¢èƒŒæ™¯
æ“ä½œæ­¥éª¤:
  1. æ¶‚æŠ¹æ•´ä¸ªèƒŒæ™¯åŒºåŸŸ
  2. ç²¾ç¡®é¿å¼€äººç‰©è½®å»“

å‚æ•°é…ç½®:
  Mask blur: 12
  Mask mode: Inpaint masked
  Masked content: Latent noise
  Inpaint area: Whole picture
  Denoising: 0.95

Prompt:
  [æ–°èƒŒæ™¯æè¿°], detailed background,
  [å…‰ç…§æ¡ä»¶ä¸äººç‰©åŒ¹é…]

Negative:
  messy background, inconsistent lighting

æŠ€å·§:
  - é…åˆ ControlNet Seg æ›´ç²¾ç¡®
  - æ³¨æ„å…‰ç…§æ–¹å‘ä¸€è‡´æ€§
  - èƒŒæ™¯æè¿°è¦è¯¦ç»†
```

---

## ğŸš€ é«˜çº§æŠ€å·§

### 1. å¤šæ¬¡ Inpaint ç²¾ä¿®

```java
// ç­–ç•¥: åˆ†æ­¥ä¿®æ”¹ï¼Œé€æ­¥å®Œå–„
ç¬¬ä¸€æ¬¡ Inpaint:
  å¤§èŒƒå›´ä¿®æ”¹
  Denoising: 0.7

ç¬¬äºŒæ¬¡ Inpaint:
  ç»†èŠ‚ä¼˜åŒ–
  Denoising: 0.4

ç¬¬ä¸‰æ¬¡ Inpaint:
  æœ€ç»ˆæ¶¦è‰²
  Denoising: 0.3

ä¼˜åŠ¿:
  - æ¯æ­¥å¯æ§
  - é€æ­¥æ¥è¿‘å®Œç¾
  - é¿å…ä¸€æ¬¡æ€§å¤§æ”¹å¤±æ§
```

---

### 2. Inpaint + ControlNet

```java
// é»„é‡‘ç»„åˆ: ç²¾å‡†æ§åˆ¶ç»“æ„
ControlNet: Canny/Depth
  - æä¾›ç»“æ„çº¦æŸ

Inpaint:
  - å±€éƒ¨é‡ç»˜å†…å®¹

ç¤ºä¾‹ - æ¢è„¸ä½†ä¿æŒå§¿åŠ¿:
  1. ControlNet OpenPose: ä¿æŒå§¿åŠ¿
  2. Inpaint é¢éƒ¨: é‡ç»˜è„¸éƒ¨
  3. Masked content: Latent noise
  4. Denoising: 0.8

æ•ˆæœ: ç»“æ„ç¨³å®š + å†…å®¹æ›¿æ¢
```

---

### 3. æ¸è¿›å¼è’™ç‰ˆæ‰©å¤§

```java
// æŠ€å·§: ä»å°åˆ°å¤§é€æ­¥æ‰©å±•
ç¬¬1æ¬¡:
  å°è’™ç‰ˆï¼Œæ ¸å¿ƒåŒºåŸŸ
  Denoising: 0.7

ç¬¬2æ¬¡:
  æ‰©å¤§è’™ç‰ˆï¼ŒåŒ…å«è¿‡æ¸¡åŒº
  Denoising: 0.5

ç¬¬3æ¬¡:
  æœ€å¤§è’™ç‰ˆï¼Œæ•´ä½“èåˆ
  Denoising: 0.3

ä¼˜åŠ¿: ä¿è¯æ ¸å¿ƒåŒºåŸŸè´¨é‡ï¼Œé€æ­¥èåˆ
```

---

### 4. ä½¿ç”¨ Sketch åŠŸèƒ½

```java
// Inpaint Sketch æ ‡ç­¾
åŠŸèƒ½: è¾¹ç”»è’™ç‰ˆè¾¹ç”»å‚è€ƒå†…å®¹

æ“ä½œ:
  1. é€‰æ‹© "Inpaint sketch" æ ‡ç­¾
  2. ç”¨å½©è‰²ç¬”åˆ·ç”»å‡ºæƒ³è¦çš„å¤§è‡´æ ·å­
  3. AI æ ¹æ®ä½ çš„è‰å›¾ç”Ÿæˆ

é€‚ç”¨:
  - æ·»åŠ å¤æ‚å…ƒç´ 
  - ç²¾ç¡®æ§åˆ¶å½¢çŠ¶å’Œä½ç½®
  - éœ€è¦å‚è€ƒè‰å›¾

ç¤ºä¾‹:
  æ·»åŠ å¸½å­: ç”»å‡ºå¸½å­å¤§è‡´å½¢çŠ¶å’Œä½ç½®
  AI ç”Ÿæˆ: æ ¹æ®è‰å›¾ç”Ÿæˆç²¾ç»†çš„å¸½å­
```

---

### 5. æ‰¹é‡ Inpaint

```java
// å·¥å…·: Batch åŠŸèƒ½ + å›ºå®šè’™ç‰ˆ
é€‚ç”¨åœºæ™¯:
  - å¤šå¼ å›¾ç›¸åŒä½ç½®ä¿®æ”¹
  - æ‰¹é‡å»æ°´å°
  - ç³»åˆ—å›¾ç»Ÿä¸€ç¼–è¾‘

æ“ä½œ:
  1. å‡†å¤‡æ‰€æœ‰éœ€è¦ä¿®æ”¹çš„å›¾
  2. ä½¿ç”¨ Script: Batch from directory
  3. è®¾ç½®ç»Ÿä¸€å‚æ•°
  4. æ‰¹é‡å¤„ç†

æ³¨æ„: è’™ç‰ˆä½ç½®è¦å¤§è‡´ç›¸åŒ
```

---

## âš ï¸ å¸¸è§é—®é¢˜

### é—®é¢˜è¯Šæ–­è¡¨

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|----------|----------|
| **æœ‰æ˜æ˜¾æ¥ç¼** | Mask Blur å¤ªå° | å¢åŠ åˆ° 8-12 |
| **ä¿®æ”¹ä¸å¤Ÿ** | Denoising å¤ªä½ | æé«˜åˆ° 0.6+ |
| **å®Œå…¨å˜æ ·** | Denoising å¤ªé«˜ | é™ä½åˆ° 0.4-0.5 |
| **ä¸å‘¨å›´ä¸åè°ƒ** | Inpaint area: Only masked | æ”¹ç”¨ Whole picture |
| **é¢œè‰²ä¸åŒ¹é…** | æç¤ºè¯ç¼ºå°‘é¢œè‰²æè¿° | æ˜ç¡®æè¿°é¢œè‰² |
| **é‡ç»˜å¤±è´¥** | è’™ç‰ˆåŒºåŸŸå¤ªå° | æ‰©å¤§è’™ç‰ˆèŒƒå›´ |
| **è¾¹ç¼˜æ¨¡ç³Š** | Mask Blur å¤ªå¤§ | é™ä½åˆ° 4-8 |

---

### è°ƒè¯•æµç¨‹

```mermaid
graph TD
    A[Inpaint æ•ˆæœä¸ç†æƒ³] --> B{ä»€ä¹ˆé—®é¢˜?}

    B -->|æœ‰æ¥ç¼| C[å¢åŠ  Mask Blur<br/>4 â†’ 8]
    B -->|ä¿®æ”¹ä¸å¤Ÿ| D[æé«˜ Denoising<br/>0.5 â†’ 0.7]
    B -->|ä¸åè°ƒ| E[Inpaint area<br/>æ”¹ä¸º Whole picture]
    B -->|å®Œå…¨å˜æ ·| F[é™ä½ Denoising<br/>æˆ–æ”¹ç”¨ Original]

    C --> G[é‡æ–°ç”Ÿæˆ]
    D --> G
    E --> G
    F --> G

    G --> H{æ»¡æ„?}
    H -->|å¦| B
    H -->|æ˜¯| I[ä¿å­˜é…ç½®]

    style I fill:#5cb85c
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### è’™ç‰ˆç»˜åˆ¶æŠ€å·§

```java
// è’™ç‰ˆç»˜åˆ¶åŸåˆ™
1. èŒƒå›´é€‚ä¸­
   - ä¸è¦å¤ªå°: ä¿®æ”¹å¯èƒ½ä¸å®Œæ•´
   - ä¸è¦å¤ªå¤§: å½±å“ä¸å¿…è¦çš„åŒºåŸŸ
   - æ°åˆ°å¥½å¤„: è¦†ç›–ç›®æ ‡ + ä¸€ç‚¹å‘¨å›´

2. è¾¹ç¼˜æŸ”å’Œ
   - ä½¿ç”¨ Mask Blur 8-12
   - é¿å…ç¡¬è¾¹ç¼˜

3. ç²¾ç¡®ç»˜åˆ¶
   - æ”¾å¤§å›¾åƒç»˜åˆ¶
   - ä½¿ç”¨åˆé€‚ç¬”åˆ·å¤§å°
   - ç»†èŠ‚å¤„ç”¨å°ç¬”åˆ·

4. å¤šæ¬¡å°è¯•
   - å¯ä»¥é‡ç”»è’™ç‰ˆ
   - å¯¹æ¯”ä¸åŒè’™ç‰ˆèŒƒå›´æ•ˆæœ
```

---

### å‚æ•°é€ŸæŸ¥è¡¨

| ä¿®æ”¹ç±»å‹ | Masked Content | Denoising | Mask Blur | Area |
|----------|----------------|-----------|-----------|------|
| **ä¿®å¤ç¼ºé™·** | Original | 0.4 | 8 | Whole |
| **è½»å¾®è°ƒæ•´** | Original | 0.5 | 4 | Whole |
| **æ›´æ¢æœè£…** | Latent noise | 0.9 | 12 | Whole |
| **æ·»åŠ ç‰©ä½“** | Latent noise | 0.85 | 8 | Whole |
| **å»é™¤ç‰©ä½“** | Fill | 1.0 | 8 | Whole |
| **æ¢èƒŒæ™¯** | Latent noise | 0.95 | 12 | Whole |
| **ä¿®æ”¹è¡¨æƒ…** | Original | 0.5 | 4 | Whole |

---

### Inpaint å·¥ä½œæµ

```java
// æ ‡å‡†æµç¨‹
1. åˆ†æç›®æ ‡
   - ç¡®å®šè¦ä¿®æ”¹çš„åŒºåŸŸ
   - ç¡®å®šä¿®æ”¹ç±»å‹

2. ç»˜åˆ¶è’™ç‰ˆ
   - ç²¾ç¡®æ¶‚æŠ¹ç›®æ ‡åŒºåŸŸ
   - æ£€æŸ¥è’™ç‰ˆå®Œæ•´æ€§

3. é€‰æ‹©å‚æ•°
   - æ ¹æ®ä¿®æ”¹ç±»å‹é€‰ Masked content
   - è®¾ç½®åˆé€‚çš„ Denoising
   - Mask Blur: 8ï¼ˆèµ·ç‚¹ï¼‰

4. ç¼–å†™æç¤ºè¯
   - è¯¦ç»†æè¿°æƒ³è¦çš„ç»“æœ
   - åŒ…å«é¢œè‰²ã€æè´¨ã€å…‰ç…§

5. æµ‹è¯•ç”Ÿæˆ
   - Batch Size=4 å¿«é€Ÿå¯¹æ¯”
   - é€‰æ‹©æœ€ä½³ç»“æœ

6. å¾®è°ƒä¼˜åŒ–
   - è°ƒæ•´ Denoising Â±0.1
   - è°ƒæ•´ Mask Blur
   - ä¼˜åŒ–æç¤ºè¯

7. æœ€ç»ˆè¾“å‡º
   - å›ºå®š Seed
   - Inpaint area: Whole picture
   - ç”Ÿæˆé«˜è´¨é‡ç‰ˆæœ¬
```

---

## ğŸ”— ç›¸å…³æ–‡ç« 

- [Denoising Strength è¯¦è§£](./10-DenoisingStrengthè¯¦è§£-é‡ç»˜å¹…åº¦æ§åˆ¶.md) - Inpaint æ ¸å¿ƒå‚æ•°
- [img2img è¯¦è§£](./18-img2imgè¯¦è§£-å›¾ç”Ÿå›¾å®Œå…¨æŒ‡å—.md) - å…¨å±€ä¿®æ”¹å¯¹æ¯”
- [ADetailer è¯¦è§£](./17-é¢éƒ¨ä¿®å¤è¯¦è§£-ADetailerä¸FaceRestore.md) - è‡ªåŠ¨å±€éƒ¨ä¿®å¤
- [ControlNet è¯¦è§£](./11-ControlNetè¯¦è§£-ç²¾å‡†æ§åˆ¶çš„è‰ºæœ¯.md) - é…åˆä½¿ç”¨

---

## ğŸ¯ æ€»ç»“

**Inpaint æ ¸å¿ƒè¦ç‚¹ï¼š**

1. **è’™ç‰ˆæ˜¯å…³é”®**: ç²¾ç¡®ç»˜åˆ¶å†³å®š80%æ•ˆæœ
2. **Masked Content è¦é€‰å¯¹**: Original/Fill/Latent noise å„æœ‰ç”¨é€”
3. **Mask Blur 8**: é€šç”¨èµ·ç‚¹ï¼Œä¿è¯èåˆ
4. **Whole picture**: ä¼˜å…ˆé€‰æ‹©ï¼Œèåˆæ›´å¥½
5. **Denoising é…åˆ**: ä¸åŒå†…å®¹ä¸åŒå¼ºåº¦

**é»„é‡‘é…ç½®ï¼š**
```java
// é€šç”¨é…ç½®
Mask blur: 8
Mask mode: Inpaint masked
Masked content: Original (ä¿®å¤) / Latent noise (å¤§æ”¹)
Inpaint area: Whole picture
Denoising: 0.5 (èµ·ç‚¹)

Prompt: [è¯¦ç»†æè¿°ç›®æ ‡]
Negative: [é¿å…é—®é¢˜]
```

**æ“ä½œå£è¯€ï¼š**
```
Inpaint å±€éƒ¨æ”¹
è’™ç‰ˆç”»å¾—è¦ç²¾å‡†
Blur å…«èµ·æ­¥å¥½èåˆ
Content è¦é€‰å¯¹

è½»æ”¹ Original
å¤§æ”¹ Latent noise
å»é™¤ç”¨ Fill
Denoising çœ‹æƒ…å†µ

Whole picture æ…¢ä½†å¥½
å¤šè¯•å‡ æ¬¡æ‰¾æœ€ä½³
```

---

**Inpaint æ˜¯ PS çº§åˆ«çš„ AI ç¼–è¾‘å·¥å…·ï¼** âœ‚ï¸

æŒæ¡ Inpaintï¼Œä½ å°±æ‹¥æœ‰äº†åƒ Photoshop ä¸€æ ·çš„ç²¾å‡†ç¼–è¾‘èƒ½åŠ›ï¼Œä½†é€Ÿåº¦æ›´å¿«ã€æ•ˆæœæ›´æ™ºèƒ½ï¼ä»æ­¤å‘Šåˆ«å…¨å›¾é‡ç»˜çš„æ— å¥ˆï¼Œæƒ³æ”¹å“ªé‡Œæ”¹å“ªé‡Œï¼

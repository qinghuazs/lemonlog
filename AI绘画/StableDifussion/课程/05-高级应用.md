---
title: Stable Diffusion è¯¾ç¨‹05 - é«˜çº§åº”ç”¨
date: 2025-01-21
permalink: /ai-art/stable-diffusion/05-advanced-applications.html
tags:
  - AIç»˜ç”»
  - Stable Diffusion
  - æ¨¡å‹è®­ç»ƒ
  - ComfyUI
  - å•†ä¸šåº”ç”¨
categories:
  - AIç»˜ç”»
---

# Stable Diffusion è¯¾ç¨‹05 - é«˜çº§åº”ç”¨

> **å­¦ä¹ æ—¶é—´**ï¼šæŒç»­å­¦ä¹ 
> **éš¾åº¦çº§åˆ«**ï¼šâ­â­â­â­â­ éå¸¸é«˜

## è¯¾ç¨‹ç›®æ ‡

é€šè¿‡æœ¬è¯¾ç¨‹çš„å­¦ä¹ ï¼Œä½ å°†èƒ½å¤Ÿï¼š

- âœ… æŒæ¡ LoRA æ¨¡å‹çš„è®­ç»ƒæ–¹æ³•
- âœ… äº†è§£ ComfyUI å·¥ä½œæµå¼€å‘
- âœ… æ¢ç´¢ AI ç»˜ç”»çš„å•†ä¸šåº”ç”¨
- âœ… å­¦ä¼šä½¿ç”¨ API è¿›è¡Œè‡ªåŠ¨åŒ–
- âœ… å¼€å‘è‡ªå®šä¹‰è„šæœ¬å’Œå·¥å…·

## 1. LoRA æ¨¡å‹è®­ç»ƒ

### 1.1 è®­ç»ƒå‰å‡†å¤‡

#### è®­ç»ƒéœ€æ±‚è¯„ä¼°

```mermaid
graph TD
    A[ç¡®å®šè®­ç»ƒç›®æ ‡] --> B{è®­ç»ƒç±»å‹}
    B -->|è§’è‰²| C[éœ€è¦15-50å¼ å›¾]
    B -->|é£æ ¼| D[éœ€è¦50-200å¼ å›¾]
    B -->|æ¦‚å¿µ| E[éœ€è¦20-100å¼ å›¾]

    C --> F[å‡†å¤‡æ•°æ®é›†]
    D --> F
    E --> F
    F --> G[æ•°æ®æ ‡æ³¨]
    G --> H[é…ç½®è®­ç»ƒå‚æ•°]
    H --> I[å¼€å§‹è®­ç»ƒ]

    style I fill:#d4edda,stroke:#333
```

**ç¡¬ä»¶è¦æ±‚**ï¼š

| é…ç½® | æœ€ä½ | æ¨è | ç†æƒ³ |
|-----|------|------|------|
| **GPU** | RTX 3060 8GB | RTX 3060 12GB | RTX 4090 24GB |
| **RAM** | 16GB | 32GB | 64GB |
| **å­˜å‚¨** | 50GB | 100GB | 200GB+ |
| **è®­ç»ƒæ—¶é—´** | 1-3å°æ—¶ | 30åˆ†é’Ÿ-1å°æ—¶ | 10-30åˆ†é’Ÿ |

### 1.2 æ•°æ®å‡†å¤‡

#### æ•°æ®æ”¶é›†åŸåˆ™

**è§’è‰² LoRA**ï¼š
```
å›¾ç‰‡æ•°é‡ï¼š15-50 å¼ 
å›¾ç‰‡è¦æ±‚ï¼š
- âœ… é«˜æ¸…ï¼ˆè‡³å°‘ 512x512ï¼‰
- âœ… è§’è‰²æ¸…æ™°å¯è§
- âœ… å¤šç§è§’åº¦å’Œè¡¨æƒ…
- âœ… ä¸åŒæœè£…å’Œåœºæ™¯
- âŒ é¿å…æ¨¡ç³Šã€é®æŒ¡ã€åƒç´ åŒ–
```

**é£æ ¼ LoRA**ï¼š
```
å›¾ç‰‡æ•°é‡ï¼š50-200 å¼ 
å›¾ç‰‡è¦æ±‚ï¼š
- âœ… é£æ ¼ç»Ÿä¸€
- âœ… é«˜è´¨é‡ä½œå“
- âœ… å¤šæ ·åŒ–ä¸»é¢˜
- âœ… æ¸…æ™°çš„é£æ ¼ç‰¹å¾
```

#### æ•°æ®é¢„å¤„ç†

**1. è£å‰ªå’Œç¼©æ”¾**
```
ç›®æ ‡å°ºå¯¸ï¼š512x512 æˆ– 768x768
é•¿å®½æ¯”ï¼šå°½é‡æ¥è¿‘ 1:1
æ ¼å¼ï¼šPNG æˆ– JPG
```

**2. æ•°æ®æ¸…æ´—**
```
- åˆ é™¤ä½è´¨é‡å›¾ç‰‡
- åˆ é™¤é‡å¤å›¾ç‰‡
- åˆ é™¤ä¸ç›¸å…³å›¾ç‰‡
- ç»Ÿä¸€å°ºå¯¸å’Œæ ¼å¼
```

### 1.3 ä½¿ç”¨ Kohya_ss è®­ç»ƒ

#### å®‰è£… Kohya_ss

**æ–¹æ³•1ï¼šGUI ç‰ˆæœ¬ï¼ˆæ¨èï¼‰**

```bash
# ä¸‹è½½
git clone https://github.com/bmaltais/kohya_ss.git
cd kohya_ss

# Windows å®‰è£…
setup.bat

# å¯åŠ¨
gui.bat

# æµè§ˆå™¨è®¿é—®
http://127.0.0.1:7860
```

**æ–¹æ³•2ï¼šç‹¬ç«‹ç‰ˆï¼ˆé€‚åˆé«˜çº§ç”¨æˆ·ï¼‰**
```bash
git clone https://github.com/kohya-ss/sd-scripts.git
cd sd-scripts
pip install -r requirements.txt
```

#### è®­ç»ƒæµç¨‹

```mermaid
graph TD
    A[å‡†å¤‡æ•°æ®é›†] --> B[æ”¾å…¥æŒ‡å®šç›®å½•]
    B --> C[é…ç½®è®­ç»ƒå‚æ•°]
    C --> D[é¢„å¤„ç†æ•°æ®<br/>Preprocessing]
    D --> E[ç”Ÿæˆæ ‡æ³¨<br/>Captioning]
    E --> F[è®­ç»ƒé…ç½®<br/>Training]
    F --> G[å¼€å§‹è®­ç»ƒ]
    G --> H[ç›‘æ§è¿›åº¦]
    H --> I{è®­ç»ƒå®Œæˆ?}
    I -->|å¦| J[ç»§ç»­è®­ç»ƒ]
    J --> H
    I -->|æ˜¯| K[æµ‹è¯•æ¨¡å‹]
    K --> L{æ•ˆæœæ»¡æ„?}
    L -->|å¦| M[è°ƒæ•´å‚æ•°é‡è®­]
    M --> C
    L -->|æ˜¯| N[å¯¼å‡ºæ¨¡å‹]

    style N fill:#d4edda,stroke:#333
```

#### å…³é”®å‚æ•°è¯¦è§£

**åŸºç¡€å‚æ•°**ï¼š

```
# æ¨¡å‹è®¾ç½®
pretrained_model: åŸºç¡€æ¨¡å‹è·¯å¾„
  æ¨èï¼šstable-diffusion-v1-5 æˆ– ä½ çš„å¸¸ç”¨æ¨¡å‹

# ç½‘ç»œè®¾ç½®
network_dim (Rank): ç½‘ç»œç§©
  - 8-16: å°å‹LoRA,å¿«é€Ÿè®­ç»ƒ
  - 32-64: æ ‡å‡†LoRA,å¹³è¡¡
  - 128+: å¤§å‹LoRA,é«˜è´¨é‡ä½†æ…¢

network_alpha: é€šå¸¸è®¾ä¸º network_dim çš„ä¸€åŠ
  å¦‚ dim=32, alpha=16
```

**è®­ç»ƒå‚æ•°**ï¼š

```
# å­¦ä¹ ç‡ (Learning Rate)
learning_rate: 1e-4 åˆ° 5e-4
  - è§’è‰²: 5e-4
  - é£æ ¼: 1e-4 åˆ° 3e-4
  - å¤ªé«˜: è®­ç»ƒä¸ç¨³å®š
  - å¤ªä½: è®­ç»ƒå¤ªæ…¢

# è®­ç»ƒè½®æ•° (Epochs)
max_train_epochs: 10-20
  - 15å¼ å›¾: 15-20 epochs
  - 30å¼ å›¾: 10-15 epochs
  - 50+å¼ å›¾: 8-12 epochs

# æ‰¹æ¬¡å¤§å° (Batch Size)
train_batch_size: 1-4
  - æ˜¾å­˜8GB: batch_size=1
  - æ˜¾å­˜12GB: batch_size=2
  - æ˜¾å­˜24GB: batch_size=4
```

**ä¼˜åŒ–å™¨è®¾ç½®**ï¼š

```
optimizer_type: AdamW8bit (æ¨è)
  - AdamW8bit: çœæ˜¾å­˜
  - AdamW: æ ‡å‡†
  - Lion: æ–°ä¼˜åŒ–å™¨,å¯å°è¯•

lr_scheduler: cosine (æ¨è)
  - cosine: ä½™å¼¦é€€ç«
  - constant: æ’å®šå­¦ä¹ ç‡
  - linear: çº¿æ€§è¡°å‡
```

#### æ ‡æ³¨æ–¹æ³•

**æ–¹æ³•1ï¼šè‡ªåŠ¨æ ‡æ³¨ï¼ˆBLIPï¼‰**
```
Kohya GUI â†’ Utilities â†’ Captioning
- Caption Extension: .txt
- Model: BLIP
- Generate captions
```

**æ–¹æ³•2ï¼šæ‰‹åŠ¨æ ‡æ³¨ï¼ˆæ¨èï¼‰**
```
ä¸ºæ¯å¼ å›¾ç‰‡åˆ›å»ºåŒåtxtæ–‡ä»¶ï¼š

å›¾ç‰‡: character_01.png
æ ‡æ³¨: character_01.txt
å†…å®¹: 1girl, blue hair, red eyes, school uniform, smile
```

**æ ‡æ³¨æŠ€å·§**ï¼š
```
ä¼˜å…ˆçº§ï¼šé«˜ â†’ ä½
[è§¦å‘è¯], [æ ¸å¿ƒç‰¹å¾], [æœè£…], [åŠ¨ä½œ], [èƒŒæ™¯], [é£æ ¼è¯]

ç¤ºä¾‹ï¼š
mycharacter, 1girl, long silver hair, blue eyes,
white dress, standing, garden background, anime style
```

#### è®­ç»ƒç›‘æ§

**æŸ¥çœ‹è®­ç»ƒæ—¥å¿—**ï¼š
```
kohya_ss/logs/

å…³æ³¨æŒ‡æ ‡ï¼š
- Loss: æŸå¤±å€¼,åº”è¯¥é€æ¸é™ä½
  - å¼€å§‹: 0.1-0.15
  - ä¸­æœŸ: 0.08-0.10
  - ç»“æŸ: 0.06-0.08
  - å¦‚æœ<0.05: å¯èƒ½è¿‡æ‹Ÿåˆ
```

**ä¸­é€”æµ‹è¯•**ï¼š
```
æ¯ 2-3 ä¸ª epoch ä¿å­˜ä¸€æ¬¡
æµ‹è¯•ç”Ÿæˆæ•ˆæœ
é€‰æ‹©æœ€ä½³ epoch çš„æ¨¡å‹
```

### 1.4 è®­ç»ƒåä¼˜åŒ–

#### æ¨¡å‹æµ‹è¯•

**æµ‹è¯•æç¤ºè¯**ï¼š
```
<lora:your_lora_name:0.8>

# è§’è‰² LoRA æµ‹è¯•
1girl, [è§¦å‘è¯], [è§’è‰²ç‰¹å¾],
different expressions, various poses

# é£æ ¼ LoRA æµ‹è¯•
landscape, character, still life,
[é£æ ¼è§¦å‘è¯], detailed
```

**å¸¸è§é—®é¢˜åŠè§£å†³**ï¼š

| é—®é¢˜ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|---------|---------|
| æ•ˆæœä¸æ˜æ˜¾ | æƒé‡å¤ªä½ | æé«˜ LoRA æƒé‡åˆ° 0.8-1.0 |
| ç‰¹å¾è¿‡åº¦ | è®­ç»ƒè¿‡åº¦/æƒé‡å¤ªé«˜ | é™ä½æƒé‡æˆ–é‡æ–°è®­ç»ƒ |
| é£æ ¼ä¸ç¨³å®š | æ•°æ®é›†ä¸ç»Ÿä¸€ | æ¸…ç†æ•°æ®é›†,ä¿è¯ä¸€è‡´æ€§ |
| æ— æ³•è§¦å‘ | è§¦å‘è¯ä¸å¯¹ | æ£€æŸ¥è®­ç»ƒæ—¶çš„æ ‡æ³¨ |

## 2. ComfyUI å·¥ä½œæµ

### 2.1 ComfyUI ç®€ä»‹

**ComfyUI vs AUTOMATIC1111**ï¼š

| ç‰¹æ€§ | ComfyUI | AUTOMATIC1111 |
|------|---------|---------------|
| **ç•Œé¢** | èŠ‚ç‚¹å¼å¯è§†åŒ– | ä¼ ç»Ÿè¡¨å• |
| **å­¦ä¹ æ›²çº¿** | é™¡å³­ | å¹³ç¼“ |
| **çµæ´»æ€§** | éå¸¸é«˜ | ä¸­ç­‰ |
| **æ€§èƒ½** | æ›´ä¼˜åŒ– | æ ‡å‡† |
| **å·¥ä½œæµå¤ç”¨** | å®¹æ˜“ | è¾ƒéš¾ |

**é€‚ç”¨åœºæ™¯**ï¼š
- ğŸ”„ å¤æ‚çš„å¤šæ­¥éª¤å·¥ä½œæµ
- ğŸ¨ éœ€è¦ç²¾ç»†æ§åˆ¶æ¯ä¸ªç¯èŠ‚
- ğŸ“¦ å·¥ä½œæµåˆ†äº«å’Œå¤ç”¨
- âš¡ è¿½æ±‚æ€§èƒ½ä¼˜åŒ–

### 2.2 ComfyUI åŸºç¡€èŠ‚ç‚¹

```mermaid
graph LR
    A[Load Checkpoint] --> B[CLIP Text Encode Positive]
    A --> C[CLIP Text Encode Negative]
    D[Empty Latent Image] --> E[KSampler]
    B --> E
    C --> E
    A --> E
    E --> F[VAE Decode]
    F --> G[Save Image]

    style A fill:#ffd4d4,stroke:#333
    style E fill:#d4d4ff,stroke:#333
    style G fill:#d4edda,stroke:#333
```

**æ ¸å¿ƒèŠ‚ç‚¹è¯´æ˜**ï¼š

1. **Load Checkpoint**
   - åŠ è½½åŸºç¡€æ¨¡å‹
   - è¾“å‡ºï¼šMODEL, CLIP, VAE

2. **CLIP Text Encode**
   - ç¼–ç æç¤ºè¯
   - Positive: æ­£é¢æç¤ºè¯
   - Negative: è´Ÿé¢æç¤ºè¯

3. **Empty Latent Image**
   - åˆ›å»ºåˆå§‹å™ªå£°å›¾
   - è®¾ç½®å°ºå¯¸

4. **KSampler**
   - æ ¸å¿ƒé‡‡æ ·å™¨
   - å‚æ•°ï¼šsteps, cfg, samplerç­‰

5. **VAE Decode**
   - å°†æ½œåœ¨ç©ºé—´è§£ç ä¸ºå›¾åƒ

6. **Save Image**
   - ä¿å­˜ç”Ÿæˆçš„å›¾ç‰‡

### 2.3 å®ç”¨å·¥ä½œæµç¤ºä¾‹

#### å·¥ä½œæµ1ï¼šæ‰¹é‡ç”Ÿæˆä¸åŒé£æ ¼

```mermaid
graph TD
    A[Load Checkpoint] --> B[LoRA Loader 1<br/>é£æ ¼A]
    B --> C[LoRA Loader 2<br/>é£æ ¼B]
    C --> D[LoRA Loader 3<br/>é£æ ¼C]

    D --> E[SwitchèŠ‚ç‚¹<br/>åˆ‡æ¢é£æ ¼]
    E --> F[CLIP Encode]
    F --> G[KSampler]
    G --> H[Save]
```

**ç”¨é€”**ï¼šä¸€é”®ç”Ÿæˆå¤šä¸ªé£æ ¼ç‰ˆæœ¬

#### å·¥ä½œæµ2ï¼šè‡ªåŠ¨è¿­ä»£ä¼˜åŒ–

```mermaid
graph TD
    A[åˆå§‹ç”Ÿæˆ] --> B[è¯„ä¼°è´¨é‡]
    B --> C{æ»¡è¶³æ¡ä»¶?}
    C -->|å¦| D[è°ƒæ•´å‚æ•°]
    D --> A
    C -->|æ˜¯| E[ä¿å­˜æœ€ä½³]
```

**ç”¨é€”**ï¼šè‡ªåŠ¨æ‰¾åˆ°æœ€ä½³å‚æ•°

### 2.4 ComfyUI ä¼˜åŠ¿åº”ç”¨

**1. æ‰¹é‡å¤„ç†**
- æ‰¹é‡åº”ç”¨ä¸åŒ LoRA
- æ‰¹é‡æµ‹è¯•å‚æ•°ç»„åˆ
- æ‰¹é‡æ”¾å¤§å¤„ç†

**2. å·¥ä½œæµåˆ†äº«**
- å¯¼å‡ºå·¥ä½œæµ JSON
- åˆ†äº«ç»™ä»–äººä½¿ç”¨
- å¯¼å…¥ä»–äººå·¥ä½œæµ

**3. æ€§èƒ½ä¼˜åŒ–**
- æ›´é«˜æ•ˆçš„å†…å­˜ä½¿ç”¨
- æ”¯æŒæ›´å¤§çš„å›¾åƒ
- æ›´å¿«çš„ç”Ÿæˆé€Ÿåº¦

## 3. å•†ä¸šåº”ç”¨æ¢ç´¢

### 3.1 åº”ç”¨é¢†åŸŸ

#### 1. è®¾è®¡è¡Œä¸š

**æ¦‚å¿µè®¾è®¡**ï¼š
```
åº”ç”¨ï¼š
- è§’è‰²æ¦‚å¿µè®¾è®¡
- åœºæ™¯æ¦‚å¿µå›¾
- äº§å“å¤–è§‚è®¾è®¡
- å»ºç­‘æ•ˆæœå›¾

ä¼˜åŠ¿ï¼š
- å¿«é€Ÿç”Ÿæˆå¤šä¸ªæ–¹æ¡ˆ
- é™ä½åˆæœŸæˆæœ¬
- åŠ é€Ÿåˆ›æ„è¿­ä»£
```

**UI/UX è®¾è®¡**ï¼š
```
åº”ç”¨ï¼š
- ç•Œé¢é…å›¾
- å›¾æ ‡è®¾è®¡
- æ’ç”»ç´ æ
- èƒŒæ™¯å›¾æ¡ˆ

å·¥ä½œæµï¼š
SDç”Ÿæˆ â†’ è®¾è®¡è½¯ä»¶ç²¾ä¿® â†’ åº”ç”¨åˆ°è®¾è®¡ä¸­
```

#### 2. å†…å®¹åˆ›ä½œ

**è‡ªåª’ä½“è¿è¥**ï¼š
```
- å…¬ä¼—å·å°é¢
- è§†é¢‘ç¼©ç•¥å›¾
- ç¤¾äº¤åª’ä½“é…å›¾
- æ–‡ç« æ’å›¾

æ•ˆç‡ï¼š
ä¼ ç»Ÿ: 1-2å°æ—¶/å¼ 
AIè¾…åŠ©: 10-20åˆ†é’Ÿ/å¼ 
```

**æ•…äº‹é…å›¾**ï¼š
```
- å°è¯´æ’å›¾
- æ¼«ç”»åˆ†é•œ
- ç»˜æœ¬åˆ›ä½œ
- å‰§æœ¬å¯è§†åŒ–
```

#### 3. æ¸¸æˆå¼€å‘

**ç¾æœ¯èµ„äº§**ï¼š
```
- è§’è‰²åŸç”»
- åœºæ™¯è®¾è®¡
- é“å…·å›¾æ ‡
- UI ç´ æ
- å®£ä¼ ç´ æ
```

**å·¥ä½œæµç¨‹**ï¼š
```mermaid
graph LR
    A[AIç”Ÿæˆè‰ç¨¿] --> B[ç¾æœ¯å¸ˆç²¾ä¿®]
    B --> C[å¼•å…¥æ¸¸æˆå¼•æ“]
    C --> D[æµ‹è¯•è°ƒæ•´]
    D --> E[æœ€ç»ˆèµ„äº§]

    style A fill:#e1f5ff,stroke:#333
    style E fill:#d4edda,stroke:#333
```

#### 4. ç”µå•†è®¾è®¡

**å•†å“å±•ç¤º**ï¼š
```
- åœºæ™¯åŒ–å±•ç¤º
- æ°›å›´å›¾
- è¯¦æƒ…é¡µé…å›¾
- Banner è®¾è®¡
```

**ç¤ºä¾‹å·¥ä½œæµ**ï¼š
```
1. æ‹æ‘„äº§å“ç…§ç‰‡
2. ä½¿ç”¨ ControlNet ä¿æŒäº§å“è½®å»“
3. æ”¹å˜èƒŒæ™¯å’Œåœºæ™¯
4. ç”Ÿæˆå¤šä¸ªé£æ ¼ç‰ˆæœ¬
5. é€‰æ‹©æœ€ä½³ç”¨äºæ¨å¹¿
```

### 3.2 ç‰ˆæƒä¸åˆè§„

**é‡è¦æç¤º**ï¼š

```
âš ï¸ ç‰ˆæƒæ„è¯†ï¼š
1. äº†è§£ä½¿ç”¨æ¨¡å‹çš„è®¸å¯åè®®
2. é¿å…ç›´æ¥ä½¿ç”¨ç‰ˆæƒè§’è‰²
3. å•†ä¸šä½¿ç”¨å‰æ£€æŸ¥æˆæƒ
4. ç”Ÿæˆå†…å®¹çš„ç‰ˆæƒå½’å±

âš ï¸ åˆè§„ä½¿ç”¨ï¼š
1. ä¸ç”Ÿæˆä¾µæƒå†…å®¹
2. ä¸å†’ç”¨ä»–äººä½œå“
3. æ ‡æ³¨ AI ç”Ÿæˆæ¥æºï¼ˆæŸäº›å¹³å°è¦æ±‚ï¼‰
4. éµå®ˆå¹³å°è§„åˆ™
```

**è®¸å¯åè®®ç±»å‹**ï¼š

| åè®® | å•†ä¸šä½¿ç”¨ | è¦æ±‚ |
|------|---------|-----|
| **CreativeML OpenRAIL-M** | âœ… å…è®¸ | éµå®ˆè´£ä»»ä½¿ç”¨è§„åˆ™ |
| **CC BY-NC** | âŒ ç¦æ­¢ | ä»…éå•†ä¸š |
| **CC BY** | âœ… å…è®¸ | éœ€ç½²å |
| **è‡ªå®šä¹‰åè®®** | âš ï¸ è§†æƒ…å†µ | è¯¦è¯»åè®® |

### 3.3 å•†ä¸šåŒ–è·¯å¾„

**è·¯å¾„1ï¼šæ¥å•æœåŠ¡**
```
æœåŠ¡ç±»å‹ï¼š
- å®šåˆ¶ LoRA è®­ç»ƒ
- æ‰¹é‡å›¾ç‰‡ç”Ÿæˆ
- é£æ ¼è½¬æ¢æœåŠ¡
- AI ç»˜ç”»æ•™å­¦

å®šä»·å‚è€ƒï¼š
- LoRA è®­ç»ƒï¼šÂ¥200-1000/ä¸ª
- å›¾ç‰‡ç”Ÿæˆï¼šÂ¥50-200/å¼ 
- æ•™å­¦è¯¾ç¨‹ï¼šÂ¥199-999
```

**è·¯å¾„2ï¼šä½œå“é”€å”®**
```
å¹³å°ï¼š
- ç«™é…·ã€æ¶‚é¸¦ç‹å›½ï¼ˆå›½å†…ï¼‰
- Pixivã€ArtStationï¼ˆå›½é™…ï¼‰
- æ·˜å®ã€å’¸é±¼ï¼ˆç´ æåŒ…ï¼‰

ç±»å‹ï¼š
- é«˜æ¸…å£çº¸
- è®¾è®¡ç´ æåŒ…
- å¤´åƒå®šåˆ¶
- NFT ä½œå“
```

**è·¯å¾„3ï¼šå·¥å…·å¼€å‘**
```
æ–¹å‘ï¼š
- å‚ç›´é¢†åŸŸå·¥å…·ï¼ˆå¦‚ç”µå•†å›¾ç‰‡ç”Ÿæˆï¼‰
- å·¥ä½œæµæ¨¡æ¿å”®å–
- æ’ä»¶å¼€å‘
- SaaS æœåŠ¡
```

## 4. API ä½¿ç”¨ä¸è‡ªåŠ¨åŒ–

### 4.1 å¯ç”¨ API

**AUTOMATIC1111 API å¯åŠ¨**ï¼š

```bash
# ç¼–è¾‘ webui-user.bat
set COMMANDLINE_ARGS=--api

# é‡å¯ WebUI
# API åœ°å€ï¼šhttp://127.0.0.1:7860
```

**API æ–‡æ¡£**ï¼š
```
è®¿é—®ï¼šhttp://127.0.0.1:7860/docs
æŸ¥çœ‹æ‰€æœ‰å¯ç”¨ API ç«¯ç‚¹
```

### 4.2 Python è°ƒç”¨ç¤ºä¾‹

**åŸºç¡€æ–‡ç”Ÿå›¾**ï¼š

```python
import requests
import base64
import json
from PIL import Image
from io import BytesIO

# API åœ°å€
url = "http://127.0.0.1:7860/sdapi/v1/txt2img"

# è¯·æ±‚å‚æ•°
payload = {
    "prompt": "a beautiful girl, long hair, blue eyes, masterpiece",
    "negative_prompt": "low quality, blurry, bad anatomy",
    "steps": 30,
    "width": 512,
    "height": 768,
    "cfg_scale": 7.5,
    "sampler_name": "DPM++ 2M Karras",
    "batch_size": 1,
}

# å‘é€è¯·æ±‚
response = requests.post(url, json=payload)
result = response.json()

# ä¿å­˜å›¾ç‰‡
for i, img_data in enumerate(result['images']):
    image = Image.open(BytesIO(base64.b64decode(img_data)))
    image.save(f'output_{i}.png')
    print(f'å·²ä¿å­˜: output_{i}.png')
```

**å›¾ç”Ÿå›¾ç¤ºä¾‹**ï¼š

```python
import base64
import requests
from PIL import Image
from io import BytesIO

# è¯»å–å›¾ç‰‡å¹¶è½¬ä¸º base64
def image_to_base64(image_path):
    with open(image_path, "rb") as f:
        return base64.b64encode(f.read()).decode()

url = "http://127.0.0.1:7860/sdapi/v1/img2img"

payload = {
    "init_images": [image_to_base64("input.png")],
    "prompt": "anime style, vibrant colors",
    "negative_prompt": "realistic, photograph",
    "steps": 30,
    "denoising_strength": 0.7,
    "width": 512,
    "height": 768,
}

response = requests.post(url, json=payload)
result = response.json()

# ä¿å­˜ç»“æœ
image = Image.open(BytesIO(base64.b64decode(result['images'][0])))
image.save('output_img2img.png')
```

### 4.3 æ‰¹é‡å¤„ç†è„šæœ¬

**æ‰¹é‡ç”Ÿæˆä¸åŒæç¤ºè¯**ï¼š

```python
import requests
import base64
from PIL import Image
from io import BytesIO
import time

url = "http://127.0.0.1:7860/sdapi/v1/txt2img"

# æç¤ºè¯åˆ—è¡¨
prompts = [
    "a cat in the garden, sunny day",
    "a dog playing in the park, happy",
    "a bird flying in the sky, clouds",
]

# åŸºç¡€å‚æ•°
base_payload = {
    "steps": 25,
    "width": 512,
    "height": 512,
    "cfg_scale": 7,
    "sampler_name": "DPM++ 2M Karras",
    "negative_prompt": "low quality, blurry",
}

# æ‰¹é‡ç”Ÿæˆ
for idx, prompt in enumerate(prompts):
    print(f"æ­£åœ¨ç”Ÿæˆ {idx+1}/{len(prompts)}: {prompt}")

    payload = base_payload.copy()
    payload["prompt"] = prompt

    response = requests.post(url, json=payload)
    result = response.json()

    # ä¿å­˜
    image = Image.open(BytesIO(base64.b64decode(result['images'][0])))
    image.save(f'batch_output_{idx+1}.png')

    print(f"å·²ä¿å­˜: batch_output_{idx+1}.png")
    time.sleep(2)  # é¿å…è¯·æ±‚è¿‡å¿«

print("å…¨éƒ¨å®Œæˆ!")
```

### 4.4 å®ç”¨è‡ªåŠ¨åŒ–å·¥å…·

**å·¥å…·1ï¼šè‡ªåŠ¨æµ‹è¯•å‚æ•°ç»„åˆ**

```python
# æµ‹è¯•ä¸åŒ CFG Scale å’Œ Steps çš„ç»„åˆ
cfg_scales = [5, 7, 9, 11]
steps_list = [20, 25, 30, 40]

for cfg in cfg_scales:
    for steps in steps_list:
        # ç”Ÿæˆå›¾ç‰‡
        # æ–‡ä»¶ååŒ…å«å‚æ•°ä¿¡æ¯
        filename = f"test_cfg{cfg}_steps{steps}.png"
```

**å·¥å…·2ï¼šå›¾ç‰‡è´¨é‡è‡ªåŠ¨è¯„åˆ†**

ç»“åˆå›¾åƒè´¨é‡è¯„ä¼°åº“,è‡ªåŠ¨ç­›é€‰é«˜è´¨é‡å›¾ç‰‡

**å·¥å…·3ï¼šå®šæ—¶æ‰¹é‡ç”Ÿæˆ**

```python
import schedule
import time

def generate_daily_art():
    # æ¯å¤©è‡ªåŠ¨ç”Ÿæˆä¸€æ‰¹å›¾ç‰‡
    pass

schedule.every().day.at("02:00").do(generate_daily_art)

while True:
    schedule.run_pending()
    time.sleep(60)
```

## è¯¾åå®è·µ

### å®è·µé¡¹ç›®

#### é¡¹ç›®1ï¼šè®­ç»ƒä¸ªäººé£æ ¼ LoRA

**ç›®æ ‡**ï¼šåˆ›å»ºå±äºè‡ªå·±çš„é£æ ¼ LoRA

**æ­¥éª¤**ï¼š
1. æ”¶é›† 50 å¼ ä½ å–œæ¬¢çš„é£æ ¼å›¾ç‰‡
2. é¢„å¤„ç†å’Œæ ‡æ³¨
3. ä½¿ç”¨ Kohya_ss è®­ç»ƒ
4. æµ‹è¯•ä¸åŒ epoch çš„æ•ˆæœ
5. é€‰æ‹©æœ€ä½³æ¨¡å‹

**è¯„ä¼°æ ‡å‡†**ï¼š
- é£æ ¼æ˜¯å¦æ˜æ˜¾
- é€‚ç”¨æ€§æ˜¯å¦å¹¿æ³›
- æ˜¯å¦æœ‰è¿‡æ‹Ÿåˆ

#### é¡¹ç›®2ï¼šComfyUI å·¥ä½œæµå¼€å‘

**ç›®æ ‡**ï¼šåˆ›å»ºä¸€ä¸ªå®ç”¨çš„è‡ªåŠ¨åŒ–å·¥ä½œæµ

**æ–¹å‘å»ºè®®**ï¼š
- ä¸€é”®ç”Ÿæˆå¤šé£æ ¼ç‰ˆæœ¬
- è‡ªåŠ¨é«˜æ¸…æ”¾å¤§æµç¨‹
- æ‰¹é‡äººç‰©ç”Ÿæˆç³»ç»Ÿ

#### é¡¹ç›®3ï¼šå•†ä¸šé¡¹ç›®å®è·µ

**ç›®æ ‡**ï¼šå®Œæˆä¸€ä¸ªå°å‹å•†ä¸šé¡¹ç›®

**ç¤ºä¾‹é¡¹ç›®**ï¼š
- ä¸ºè‡ªåª’ä½“å·ç”Ÿæˆ 10 å¼ å°é¢å›¾
- ä¸ºå°è¯´åˆ›ä½œ 5 å¼ æ’å›¾
- ä¸ºäº§å“è®¾è®¡ 3 ç§åœºæ™¯å±•ç¤ºå›¾

**è¦æ±‚**ï¼š
- ç¬¦åˆå•†ä¸šè´¨é‡æ ‡å‡†
- è®°å½•å®Œæ•´å·¥ä½œæµç¨‹
- æ€»ç»“ç»éªŒæ•™è®­

## ä¸‹èŠ‚é¢„å‘Š

**è¯¾ç¨‹06ï¼šæŒç»­å­¦ä¹ **

ä¸‹èŠ‚è¯¾æˆ‘ä»¬å°†æ¢è®¨ï¼š
- ğŸŒŸ æœ€æ–°æŠ€æœ¯è¶‹åŠ¿å’Œæ–°æ¨¡å‹
- ğŸ¤ ç¤¾åŒºèµ„æºå’Œå­¦ä¹ æ¸ é“
- ğŸ“š è¿›é˜¶å­¦ä¹ è·¯å¾„
- ğŸ’¡ æŒç»­æå‡å»ºè®®

---

> ğŸ’¡ **å­¦ä¹ å»ºè®®**ï¼šé«˜çº§åº”ç”¨éœ€è¦å¤§é‡å®è·µå’Œè¯•é”™ã€‚ä¸è¦å®³æ€•å¤±è´¥,æ¯æ¬¡å¤±è´¥éƒ½æ˜¯å­¦ä¹ çš„æœºä¼šã€‚

> âš ï¸ **é‡è¦æé†’**ï¼šåœ¨å•†ä¸šåº”ç”¨å‰,åŠ¡å¿…äº†è§£ç›¸å…³æ³•å¾‹æ³•è§„å’Œç‰ˆæƒé—®é¢˜,åˆè§„ä½¿ç”¨ AI æŠ€æœ¯ã€‚

> ğŸ¯ **ç›®æ ‡**ï¼šæŒæ¡ä¸€é¡¹é«˜çº§æŠ€èƒ½ï¼ˆæ¨¡å‹è®­ç»ƒ/APIå¼€å‘/å•†ä¸šåº”ç”¨),å¹¶èƒ½ç‹¬ç«‹å®Œæˆé¡¹ç›®ã€‚

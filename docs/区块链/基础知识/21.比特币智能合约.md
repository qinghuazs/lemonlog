---
title: æ¯”ç‰¹å¸æ™ºèƒ½åˆçº¦
date: 2025-09-30
permalink: /blockchain/bitcoin-smart-contracts.html
tags:
  - åŒºå—é“¾
  - æ¯”ç‰¹å¸
  - æ™ºèƒ½åˆçº¦
  - Script
categories:
  - åŒºå—é“¾
---

# æ¯”ç‰¹å¸æ™ºèƒ½åˆçº¦

## Bitcoin ScriptåŸºç¡€

### Scriptè¯­è¨€ç‰¹æ€§

æ¯”ç‰¹å¸Scriptæ˜¯ä¸€ç§åŸºäºæ ˆçš„ã€éå›¾çµå®Œå¤‡çš„è„šæœ¬è¯­è¨€ã€‚

```java
public class BitcoinScript {

    public void scriptCharacteristics() {
        System.out.println("=== Bitcoin Script ç‰¹æ€§ ===\n");

        System.out.println("è®¾è®¡ç‰¹ç‚¹ï¼š");
        System.out.println("âœ“ åŸºäºæ ˆï¼ˆStack-basedï¼‰");
        System.out.println("âœ“ ä»å·¦åˆ°å³æ‰§è¡Œ");
        System.out.println("âœ“ éå›¾çµå®Œå¤‡");
        System.out.println("âœ“ æ— å¾ªç¯");
        System.out.println("âœ“ ç¡®å®šæ€§æ‰§è¡Œ");

        System.out.println("\nä¸ºä½•éå›¾çµå®Œå¤‡ï¼Ÿ");
        System.out.println("- é˜²æ­¢æ— é™å¾ªç¯");
        System.out.println("- é¿å…DoSæ”»å‡»");
        System.out.println("- å¯é¢„æµ‹gasè´¹ç”¨");
        System.out.println("- ç®€åŒ–éªŒè¯");
    }

    // Scriptæ‰§è¡Œç¤ºä¾‹
    public void executeScript() {
        System.out.println("\n=== Script æ‰§è¡Œç¤ºä¾‹ ===\n");

        // è„šæœ¬ï¼š2 3 OP_ADD 5 OP_EQUAL
        Stack<Integer> stack = new Stack<>();

        System.out.println("è„šæœ¬: 2 3 OP_ADD 5 OP_EQUAL");
        System.out.println("\næ‰§è¡Œè¿‡ç¨‹ï¼š");

        // 2
        stack.push(2);
        System.out.println("1. å‹å…¥ 2: " + stack);

        // 3
        stack.push(3);
        System.out.println("2. å‹å…¥ 3: " + stack);

        // OP_ADD
        int b = stack.pop();
        int a = stack.pop();
        stack.push(a + b);
        System.out.println("3. OP_ADD: " + stack);

        // 5
        stack.push(5);
        System.out.println("4. å‹å…¥ 5: " + stack);

        // OP_EQUAL
        int y = stack.pop();
        int x = stack.pop();
        stack.push(x == y ? 1 : 0);
        System.out.println("5. OP_EQUAL: " + stack);

        boolean result = stack.pop() == 1;
        System.out.println("\nç»“æœ: " + (result ? "âœ“ æˆåŠŸ" : "âœ— å¤±è´¥"));
    }
}
```

### å¸¸ç”¨æ“ä½œç 

```java
public class ScriptOpcodes {

    public void categorizeOpcodes() {
        System.out.println("=== Script æ“ä½œç åˆ†ç±» ===\n");

        System.out.println("ã€å¸¸é‡ã€‘");
        System.out.println("OP_0, OP_1, ..., OP_16    æ¨é€å°æ•´æ•°");
        System.out.println("OP_PUSHDATA1/2/4          æ¨é€æ•°æ®");

        System.out.println("\nã€æ ˆæ“ä½œã€‘");
        System.out.println("OP_DUP                    å¤åˆ¶æ ˆé¡¶");
        System.out.println("OP_DROP                   åˆ é™¤æ ˆé¡¶");
        System.out.println("OP_SWAP                   äº¤æ¢æ ˆé¡¶ä¸¤å…ƒç´ ");

        System.out.println("\nã€ç®—æœ¯ã€‘");
        System.out.println("OP_ADD                    åŠ æ³•");
        System.out.println("OP_SUB                    å‡æ³•");
        System.out.println("OP_MUL                    ä¹˜æ³•ï¼ˆç¦ç”¨ï¼‰");

        System.out.println("\nã€æ¯”è¾ƒã€‘");
        System.out.println("OP_EQUAL                  ç›¸ç­‰");
        System.out.println("OP_EQUALVERIFY            ç›¸ç­‰å¹¶éªŒè¯");
        System.out.println("OP_LESSTHAN               å°äº");

        System.out.println("\nã€å¯†ç å­¦ã€‘");
        System.out.println("OP_HASH160                RIPEMD160(SHA256(x))");
        System.out.println("OP_SHA256                 SHA256");
        System.out.println("OP_CHECKSIG               éªŒè¯ç­¾å");
        System.out.println("OP_CHECKMULTISIG          éªŒè¯å¤šç­¾");

        System.out.println("\nã€æ—¶é—´é”ã€‘");
        System.out.println("OP_CHECKLOCKTIMEVERIFY    ç»å¯¹æ—¶é—´é”");
        System.out.println("OP_CHECKSEQUENCEVERIFY    ç›¸å¯¹æ—¶é—´é”");
    }
}
```

## æ ‡å‡†äº¤æ˜“ç±»å‹

### P2PKH (Pay-to-PubKey-Hash)

```java
public class P2PKH {

    public void createP2PKH() {
        System.out.println("=== P2PKH è„šæœ¬ ===\n");

        // ScriptPubKey (é”å®šè„šæœ¬)
        String scriptPubKey =
            "OP_DUP " +
            "OP_HASH160 " +
            "<pubKeyHash> " +
            "OP_EQUALVERIFY " +
            "OP_CHECKSIG";

        System.out.println("ScriptPubKey:");
        System.out.println(scriptPubKey);

        // ScriptSig (è§£é”è„šæœ¬)
        String scriptSig =
            "<signature> " +
            "<publicKey>";

        System.out.println("\nScriptSig:");
        System.out.println(scriptSig);

        System.out.println("\næ‰§è¡Œæµç¨‹ï¼š");
        demonstrateP2PKH();
    }

    private void demonstrateP2PKH() {
        Stack<String> stack = new Stack<>();

        System.out.println("\n1. æ‰§è¡Œ ScriptSig:");
        stack.push("<signature>");
        System.out.println("   å‹å…¥ <signature>");
        stack.push("<publicKey>");
        System.out.println("   å‹å…¥ <publicKey>");
        System.out.println("   æ ˆ: [<sig>, <pubKey>]");

        System.out.println("\n2. æ‰§è¡Œ ScriptPubKey:");

        System.out.println("   OP_DUP");
        String top = stack.peek();
        stack.push(top);
        System.out.println("   æ ˆ: [<sig>, <pubKey>, <pubKey>]");

        System.out.println("\n   OP_HASH160");
        String pubKey = stack.pop();
        String pubKeyHash = hash160(pubKey);
        stack.push(pubKeyHash);
        System.out.println("   æ ˆ: [<sig>, <pubKey>, <pubKeyHash>]");

        System.out.println("\n   <pubKeyHash>");
        stack.push("<expectedPubKeyHash>");
        System.out.println("   æ ˆ: [<sig>, <pubKey>, <pubKeyHash>, <expected>]");

        System.out.println("\n   OP_EQUALVERIFY");
        String expected = stack.pop();
        String actual = stack.pop();
        if (!expected.equals(actual)) {
            System.out.println("   å¤±è´¥ï¼šå“ˆå¸Œä¸åŒ¹é…");
            return;
        }
        System.out.println("   æ ˆ: [<sig>, <pubKey>]");

        System.out.println("\n   OP_CHECKSIG");
        String sig = stack.pop();
        String pk = stack.pop();
        boolean valid = verifySignature(sig, pk);
        stack.push(valid ? "1" : "0");
        System.out.println("   æ ˆ: [" + (valid ? "1" : "0") + "]");

        System.out.println("\n3. ç»“æœ: " + (valid ? "âœ“ éªŒè¯é€šè¿‡" : "âœ— éªŒè¯å¤±è´¥"));
    }
}
```

### P2SH (Pay-to-Script-Hash)

```java
public class P2SH {

    public void createP2SH() {
        System.out.println("=== P2SH è„šæœ¬ ===\n");

        System.out.println("ç”¨é€”ï¼š");
        System.out.println("- éšè—å¤æ‚è„šæœ¬");
        System.out.println("- æ¥æ”¶æ–¹å®šä¹‰èŠ±è´¹æ¡ä»¶");
        System.out.println("- å¤šç­¾é’±åŒ…å¸¸ç”¨");

        // èµå›è„šæœ¬ (Redeem Script)
        String redeemScript = "2 <pubKey1> <pubKey2> <pubKey3> 3 OP_CHECKMULTISIG";
        System.out.println("\nRedeem Script (2-of-3å¤šç­¾):");
        System.out.println(redeemScript);

        // è®¡ç®—è„šæœ¬å“ˆå¸Œ
        String scriptHash = hash160(redeemScript);
        System.out.println("\nScript Hash:");
        System.out.println(scriptHash);

        // ScriptPubKey
        String scriptPubKey =
            "OP_HASH160 " +
            "<scriptHash> " +
            "OP_EQUAL";

        System.out.println("\nScriptPubKey:");
        System.out.println(scriptPubKey);

        // ScriptSig
        String scriptSig =
            "<sig1> " +
            "<sig2> " +
            "<redeemScript>";

        System.out.println("\nScriptSig:");
        System.out.println(scriptSig);
    }

    public void demonstrateP2SH() {
        System.out.println("\n=== P2SH æ‰§è¡Œ ===\n");

        System.out.println("1. éªŒè¯è„šæœ¬å“ˆå¸Œ:");
        System.out.println("   hash160(<redeemScript>) == <scriptHash>");
        System.out.println("   âœ“ åŒ¹é…");

        System.out.println("\n2. æ‰§è¡Œèµå›è„šæœ¬:");
        System.out.println("   2 <pubKey1> <pubKey2> <pubKey3> 3 OP_CHECKMULTISIG");
        System.out.println("   éœ€è¦3ä¸ªå…¬é’¥ä¸­çš„2ä¸ªç­¾å");
        System.out.println("   âœ“ éªŒè¯é€šè¿‡");
    }
}
```

## é«˜çº§Scriptåº”ç”¨

### æ—¶é—´é”åˆçº¦

```java
public class TimeLockContracts {

    // ç»å¯¹æ—¶é—´é” (CLTV)
    public void absoluteTimeLock() {
        System.out.println("=== OP_CHECKLOCKTIMEVERIFY (CLTV) ===\n");

        System.out.println("ç”¨é€”ï¼š");
        System.out.println("- åœ¨ç‰¹å®šæ—¶é—´åæ‰èƒ½èŠ±è´¹");
        System.out.println("- é—å˜±åˆçº¦");
        System.out.println("- æ‰˜ç®¡æœåŠ¡");

        // è„šæœ¬ç¤ºä¾‹ï¼š2024å¹´1æœˆ1æ—¥åå¯èŠ±è´¹
        long unlockTime = 1704067200;  // Unixæ—¶é—´æˆ³

        String script =
            "<unlockTime> " +
            "OP_CHECKLOCKTIMEVERIFY " +
            "OP_DROP " +
            "OP_DUP " +
            "OP_HASH160 " +
            "<pubKeyHash> " +
            "OP_EQUALVERIFY " +
            "OP_CHECKSIG";

        System.out.println("\nè„šæœ¬:");
        System.out.println(script);

        System.out.println("\næ‰§è¡Œæ¡ä»¶ï¼š");
        System.out.println("1. å½“å‰æ—¶é—´ >= " + unlockTime);
        System.out.println("2. äº¤æ˜“nLockTime >= " + unlockTime);
        System.out.println("3. æä¾›æœ‰æ•ˆç­¾å");
    }

    // ç›¸å¯¹æ—¶é—´é” (CSV)
    public void relativeTimeLock() {
        System.out.println("\n=== OP_CHECKSEQUENCEVERIFY (CSV) ===\n");

        System.out.println("ç”¨é€”ï¼š");
        System.out.println("- ä»ç¡®è®¤åNä¸ªåŒºå—æ‰èƒ½èŠ±è´¹");
        System.out.println("- é—ªç”µç½‘ç»œé€šé“");
        System.out.println("- æ”¯ä»˜é€šé“");

        // è„šæœ¬ç¤ºä¾‹ï¼šç¡®è®¤å100ä¸ªåŒºå—
        int blocks = 100;

        String script =
            "<blocks> " +
            "OP_CHECKSEQUENCEVERIFY " +
            "OP_DROP " +
            "OP_DUP " +
            "OP_HASH160 " +
            "<pubKeyHash> " +
            "OP_EQUALVERIFY " +
            "OP_CHECKSIG";

        System.out.println("\nè„šæœ¬:");
        System.out.println(script);

        System.out.println("\næ‰§è¡Œæ¡ä»¶ï¼š");
        System.out.println("1. è¾“å…¥UTXOå·²ç¡®è®¤" + blocks + "ä¸ªåŒºå—");
        System.out.println("2. è¾“å…¥nSequence >= " + blocks);
        System.out.println("3. æä¾›æœ‰æ•ˆç­¾å");
    }

    // æ—¶é—´é”åº”ç”¨ï¼šé—å˜±åˆçº¦
    public void willContract() {
        System.out.println("\n=== é—å˜±åˆçº¦ç¤ºä¾‹ ===\n");

        System.out.println("åœºæ™¯ï¼š");
        System.out.println("- Aliceé”å®šBTC");
        System.out.println("- æ­£å¸¸æƒ…å†µï¼šAliceå¯ä»¥èŠ±è´¹");
        System.out.println("- 1å¹´æ— æ´»åŠ¨ï¼šç»§æ‰¿äººBobå¯ä»¥èŠ±è´¹");

        String script =
            "OP_IF " +
            "  <Alice_pubKey> OP_CHECKSIG " +
            "OP_ELSE " +
            "  <1å¹´> OP_CHECKLOCKTIMEVERIFY OP_DROP " +
            "  <Bob_pubKey> OP_CHECKSIG " +
            "OP_ENDIF";

        System.out.println("\nè„šæœ¬:");
        System.out.println(script);

        System.out.println("\nä½¿ç”¨æ–¹å¼ï¼š");
        System.out.println("1. Aliceå®šæœŸ\"åˆ·æ–°\"ï¼ˆåˆ›å»ºæ–°äº¤æ˜“ï¼‰");
        System.out.println("2. å¦‚æœAlice 1å¹´æœªæ´»åŠ¨");
        System.out.println("3. Bobå¯ä»¥ç”¨æ—¶é—´é”åˆ†æ”¯èŠ±è´¹");
    }
}
```

### å“ˆå¸Œæ—¶é—´é”åˆçº¦ (HTLC)

```java
public class HTLC {

    public void explainHTLC() {
        System.out.println("=== å“ˆå¸Œæ—¶é—´é”åˆçº¦ (HTLC) ===\n");

        System.out.println("ç”¨é€”ï¼š");
        System.out.println("- é—ªç”µç½‘ç»œè·¯ç”±");
        System.out.println("- åŸå­äº¤æ¢");
        System.out.println("- è·¨é“¾äº’æ¢");

        System.out.println("\nå·¥ä½œåŸç†ï¼š");
        System.out.println("1. æ¥æ”¶æ–¹ç”Ÿæˆå¯†é’¥secret");
        System.out.println("2. è®¡ç®—å“ˆå¸Œ h = hash(secret)");
        System.out.println("3. å‘é€æ–¹é”å®šèµ„é‡‘ï¼š");
        System.out.println("   - æ¡ä»¶A: æä¾›secret");
        System.out.println("   - æ¡ä»¶B: è¶…æ—¶åé€€æ¬¾");
    }

    public void htlcScript() {
        System.out.println("\n=== HTLC è„šæœ¬ ===\n");

        String script =
            "OP_IF " +
            "  OP_HASH160 <hash> OP_EQUALVERIFY " +
            "  <receiver_pubKey> OP_CHECKSIG " +
            "OP_ELSE " +
            "  <timeout> OP_CHECKLOCKTIMEVERIFY OP_DROP " +
            "  <sender_pubKey> OP_CHECKSIG " +
            "OP_ENDIF";

        System.out.println("è„šæœ¬:");
        System.out.println(script);

        System.out.println("\nè·¯å¾„1ï¼ˆæ¥æ”¶æ–¹ï¼‰ï¼š");
        System.out.println("ScriptSig: <receiver_sig> <secret> 1");
        System.out.println("æ¡ä»¶ï¼šæä¾›æ­£ç¡®çš„secret");

        System.out.println("\nè·¯å¾„2ï¼ˆå‘é€æ–¹é€€æ¬¾ï¼‰ï¼š");
        System.out.println("ScriptSig: <sender_sig> 0");
        System.out.println("æ¡ä»¶ï¼šè¶…æ—¶å");
    }

    // åŸå­äº¤æ¢ç¤ºä¾‹
    public void atomicSwap() {
        System.out.println("\n=== åŸå­äº¤æ¢ç¤ºä¾‹ ===\n");

        System.out.println("åœºæ™¯ï¼šAliceå’ŒBobäº¤æ¢BTC <-> LTC");

        System.out.println("\næ­¥éª¤ï¼š");
        System.out.println("1. Aliceç”Ÿæˆsecret");
        String secret = "random_secret_123";
        String hash = sha256(secret);
        System.out.println("   secret: " + secret);
        System.out.println("   hash: " + hash);

        System.out.println("\n2. Aliceåˆ›å»ºBTC HTLC");
        System.out.println("   é”å®š: 1 BTC");
        System.out.println("   æ¥æ”¶æ–¹: Bob");
        System.out.println("   æ¡ä»¶: secretæˆ–24å°æ—¶é€€æ¬¾");

        System.out.println("\n3. Bobåˆ›å»ºLTC HTLC");
        System.out.println("   é”å®š: 100 LTC");
        System.out.println("   æ¥æ”¶æ–¹: Alice");
        System.out.println("   æ¡ä»¶: secretæˆ–12å°æ—¶é€€æ¬¾");

        System.out.println("\n4. Aliceå…¬å¼€secreté¢†å–LTC");
        System.out.println("   secretæš´éœ²ï¼");

        System.out.println("\n5. Bobç”¨secreté¢†å–BTC");
        System.out.println("   äº¤æ¢å®Œæˆï¼");

        System.out.println("\nç»“æœï¼š");
        System.out.println("âœ“ å…¨éƒ¨æˆåŠŸæˆ–å…¨éƒ¨å¤±è´¥");
        System.out.println("âœ“ æ— éœ€ä¿¡ä»»ç¬¬ä¸‰æ–¹");
    }
}
```

### å¤šç­¾åˆçº¦

```java
public class MultiSigContracts {

    public void standardMultisig() {
        System.out.println("=== æ ‡å‡†å¤šç­¾ ===\n");

        // 2-of-3å¤šç­¾
        String script =
            "2 " +
            "<pubKey1> " +
            "<pubKey2> " +
            "<pubKey3> " +
            "3 " +
            "OP_CHECKMULTISIG";

        System.out.println("2-of-3 å¤šç­¾è„šæœ¬:");
        System.out.println(script);

        System.out.println("\nScriptSig:");
        System.out.println("OP_0 <sig1> <sig2>");
        System.out.println("(æ³¨ï¼šOP_0æ˜¯å› ä¸ºOP_CHECKMULTISIGçš„bug)");

        System.out.println("\nåº”ç”¨åœºæ™¯ï¼š");
        System.out.println("- å…¬å¸è´¦æˆ·ï¼ˆéœ€è¦å¤šä¸ªé«˜ç®¡ç­¾åï¼‰");
        System.out.println("- æ‰˜ç®¡æœåŠ¡ï¼ˆä¹°æ–¹+å–æ–¹+ä»²è£æ–¹ï¼‰");
        System.out.println("- èµ„é‡‘å®‰å…¨ï¼ˆåˆ†æ•£å¯†é’¥é£é™©ï¼‰");
    }

    public void thresholdSignatures() {
        System.out.println("\n=== é—¨æ§›ç­¾åæ–¹æ¡ˆ ===\n");

        System.out.println("å¸¸è§é…ç½®ï¼š");

        System.out.println("\n1-of-1: å•ç­¾");
        System.out.println("- ä¸ªäººé’±åŒ…");

        System.out.println("\n2-of-2: åŒç­¾");
        System.out.println("- è”åè´¦æˆ·");
        System.out.println("- åˆä¼™ä¼ä¸š");

        System.out.println("\n2-of-3: çµæ´»å¤šç­¾");
        System.out.println("- å…¬å¸è´¦æˆ·");
        System.out.println("- æ‰˜ç®¡æœåŠ¡");
        System.out.println("- å®¹å¿1ä¸ªå¯†é’¥ä¸¢å¤±");

        System.out.println("\n3-of-5: å¤§å‹ç»„ç»‡");
        System.out.println("- è‘£äº‹ä¼šå†³ç­–");
        System.out.println("- é«˜å®‰å…¨è¦æ±‚");
        System.out.println("- å®¹å¿2ä¸ªå¯†é’¥ä¸¢å¤±");
    }

    // MuSigï¼ˆSchnorrèšåˆç­¾åï¼‰
    public void muSig() {
        System.out.println("\n=== MuSig (Schnorrèšåˆ) ===\n");

        System.out.println("ä¼˜åŠ¿ï¼š");
        System.out.println("âœ“ å¤šç­¾çœ‹èµ·æ¥åƒå•ç­¾");
        System.out.println("âœ“ éšç§å¢å¼º");
        System.out.println("âœ“ ç©ºé—´èŠ‚çœ");
        System.out.println("âœ“ è´¹ç”¨é™ä½");

        System.out.println("\nå¯¹æ¯”ï¼š");
        System.out.println("ä¼ ç»Ÿ2-of-2:");
        System.out.println("  è„šæœ¬: 2 <pubKey1> <pubKey2> 2 OP_CHECKMULTISIG");
        System.out.println("  å¤§å°: ~100 å­—èŠ‚");

        System.out.println("\nMuSig 2-of-2:");
        System.out.println("  è„šæœ¬: <aggregated_pubKey> OP_CHECKSIG");
        System.out.println("  å¤§å°: ~65 å­—èŠ‚");
        System.out.println("  èŠ‚çœ: 35%");
    }
}
```

## DLC (Discreet Log Contracts)

```java
public class DLC {

    public void explainDLC() {
        System.out.println("=== ç¦»æ•£æ—¥å¿—åˆçº¦ (DLC) ===\n");

        System.out.println("æ¦‚å¿µï¼š");
        System.out.println("- åŸºäºé¢„è¨€æœºçš„åˆçº¦");
        System.out.println("- åœ¨æ¯”ç‰¹å¸ä¸Šå®ç°æ™ºèƒ½åˆçº¦");
        System.out.println("- é“¾ä¸‹åå•†ï¼Œé“¾ä¸Šç»“ç®—");

        System.out.println("\nç»„æˆï¼š");
        System.out.println("1. é¢„è¨€æœºï¼ˆOracleï¼‰");
        System.out.println("   - æä¾›å¤–éƒ¨æ•°æ®");
        System.out.println("   - ç­¾åç‰¹å®šç»“æœ");

        System.out.println("\n2. åˆçº¦å‚ä¸æ–¹");
        System.out.println("   - åå•†åˆçº¦æ¡æ¬¾");
        System.out.println("   - é¢„ç­¾åæ‰€æœ‰ç»“æœ");

        System.out.println("\n3. ç»“ç®—äº¤æ˜“");
        System.out.println("   - æ ¹æ®é¢„è¨€æœºç­¾å");
        System.out.println("   - æ‰§è¡Œå¯¹åº”ç»“æœ");
    }

    public void dlcExample() {
        System.out.println("\n=== DLC åº”ç”¨ç¤ºä¾‹ ===\n");

        System.out.println("ã€åœºæ™¯1ï¼šæœŸæƒåˆçº¦ã€‘");
        System.out.println("Aliceå’ŒBobå¯¹èµŒBTCä»·æ ¼");
        System.out.println("- å¦‚æœBTC > $50,000: Aliceèµ¢");
        System.out.println("- å¦‚æœBTC < $50,000: Bobèµ¢");

        System.out.println("\næ­¥éª¤ï¼š");
        System.out.println("1. åŒæ–¹é”å®šèµ„é‡‘ï¼ˆå„1 BTCï¼‰");
        System.out.println("2. é¢„è¨€æœºæ‰¿è¯ºç­¾åä»·æ ¼");
        System.out.println("3. åŒæ–¹é¢„ç­¾åæ‰€æœ‰ç»“æœ:");
        System.out.println("   - ä»·æ ¼>50k: Aliceè·å¾—2 BTC");
        System.out.println("   - ä»·æ ¼<50k: Bobè·å¾—2 BTC");
        System.out.println("4. åˆ°æœŸæ—¶é¢„è¨€æœºå…¬å¸ƒä»·æ ¼ç­¾å");
        System.out.println("5. èµ¢å®¶å¹¿æ’­å¯¹åº”çš„é¢„ç­¾åäº¤æ˜“");

        System.out.println("\nã€åœºæ™¯2ï¼šä¿é™©åˆçº¦ã€‘");
        System.out.println("å†œæ°‘è´­ä¹°å¤©æ°”ä¿é™©");
        System.out.println("- é™é›¨é‡<50mm: è·å¾—èµ”ä»˜");
        System.out.println("- é™é›¨é‡â‰¥50mm: ä¸èµ”ä»˜");

        System.out.println("\nã€åœºæ™¯3ï¼šç¨³å®šå¸ã€‘");
        System.out.println("æŠµæŠ¼BTCå‘è¡Œç¨³å®šå¸");
        System.out.println("- æ ¹æ®ä»·æ ¼é¢„è¨€æœº");
        System.out.println("- è‡ªåŠ¨æ¸…ç®—");
    }

    public void dlcVsHTLC() {
        System.out.println("\n=== DLC vs HTLC ===\n");

        System.out.println("HTLC:");
        System.out.println("- åŸºäºå¯†é’¥æ­ç¤º");
        System.out.println("- æ— éœ€å¤–éƒ¨æ•°æ®");
        System.out.println("- äºŒå…ƒç»“æœ");

        System.out.println("\nDLC:");
        System.out.println("- åŸºäºé¢„è¨€æœºç­¾å");
        System.out.println("- ä¾èµ–å¤–éƒ¨æ•°æ®");
        System.out.println("- å¤šç§ç»“æœ");
        System.out.println("- æ›´çµæ´»");
    }
}
```

## RGBåè®®

```java
public class RGBProtocol {

    public void explainRGB() {
        System.out.println("=== RGB åè®® ===\n");

        System.out.println("æ ¸å¿ƒæ€æƒ³ï¼š");
        System.out.println("- å®¢æˆ·ç«¯éªŒè¯");
        System.out.println("- é“¾ä¸‹çŠ¶æ€");
        System.out.println("- æ¯”ç‰¹å¸æ‰¿è¯º");

        System.out.println("\nç‰¹ç‚¹ï¼š");
        System.out.println("âœ“ ä¸å ç”¨åŒºå—ç©ºé—´");
        System.out.println("âœ“ éšç§ä¿æŠ¤");
        System.out.println("âœ“ å¯æ‰©å±•");
        System.out.println("âœ“ æ™ºèƒ½åˆçº¦");
    }

    public void rgbTokens() {
        System.out.println("\n=== RGB ä»£å¸å‘è¡Œ ===\n");

        System.out.println("æ­¥éª¤ï¼š");
        System.out.println("1. åˆ›å»ºä»£å¸å®šä¹‰");
        System.out.println("   - åç§°ã€ç¬¦å·");
        System.out.println("   - æ€»é‡ã€ç²¾åº¦");

        System.out.println("\n2. ç”Ÿæˆåˆ›ä¸–UTXO");
        System.out.println("   - åœ¨æ¯”ç‰¹å¸äº¤æ˜“ä¸­æ‰¿è¯º");
        System.out.println("   - é“¾ä¸‹å­˜å‚¨çŠ¶æ€");

        System.out.println("\n3. ä»£å¸è½¬ç§»");
        System.out.println("   - æ¯”ç‰¹å¸äº¤æ˜“åŒ…å«æ‰¿è¯º");
        System.out.println("   - é“¾ä¸‹ä¼ é€’è¯æ˜");

        System.out.println("\n4. å®¢æˆ·ç«¯éªŒè¯");
        System.out.println("   - éªŒè¯å®Œæ•´å†å²");
        System.out.println("   - æ— éœ€å…¨å±€çŠ¶æ€");
    }

    public void rgbVsOmni() {
        System.out.println("\n=== RGB vs Omni/Colored Coins ===\n");

        System.out.println("Omni/Colored Coins:");
        System.out.println("- é“¾ä¸Šå­˜å‚¨æ‰€æœ‰æ•°æ®");
        System.out.println("- å ç”¨åŒºå—ç©ºé—´");
        System.out.println("- å…¨å±€å¯è§");

        System.out.println("\nRGB:");
        System.out.println("- é“¾ä¸‹å­˜å‚¨çŠ¶æ€");
        System.out.println("- ä»…æ‰¿è¯ºåœ¨é“¾ä¸Š");
        System.out.println("- éšç§ä¿æŠ¤");
        System.out.println("- å¯æ‰©å±•æ€§æ›´å¥½");
    }
}
```

## Taproot æ™ºèƒ½åˆçº¦

```java
public class TaprootContracts {

    public void taprootScripts() {
        System.out.println("=== Taproot è„šæœ¬æ ‘ ===\n");

        System.out.println("ä¼˜åŠ¿ï¼š");
        System.out.println("- è„šæœ¬éšç§");
        System.out.println("- çµæ´»ç»„åˆ");
        System.out.println("- ä»…æš´éœ²æ‰§è¡Œåˆ†æ”¯");

        System.out.println("\nç¤ºä¾‹ï¼šå¤šæ¡ä»¶é’±åŒ…");
        System.out.println("å¯†é’¥è·¯å¾„: 3-of-3èšåˆå¯†é’¥ï¼ˆå¸¸ç”¨ï¼‰");
        System.out.println("è„šæœ¬è·¯å¾„1: 2-of-3å¤šç­¾ï¼ˆé™çº§ï¼‰");
        System.out.println("è„šæœ¬è·¯å¾„2: 90å¤©åå•ç­¾ï¼ˆç´§æ€¥ï¼‰");
        System.out.println("è„šæœ¬è·¯å¾„3: å…¬å¸CEO + CFOï¼ˆå•†ä¸šï¼‰");

        System.out.println("\nä½¿ç”¨ï¼š");
        System.out.println("- æ­£å¸¸ï¼šå¯†é’¥è·¯å¾„ï¼Œéšç§æœ€ä½³");
        System.out.println("- å¼‚å¸¸ï¼šè„šæœ¬è·¯å¾„ï¼Œä»…æš´éœ²è¯¥åˆ†æ”¯");
        System.out.println("- å¤–éƒ¨æ— æ³•çŸ¥é“å…¶ä»–åˆ†æ”¯");
    }

    public void taprootExamples() {
        System.out.println("\n=== Taproot åº”ç”¨ç¤ºä¾‹ ===\n");

        System.out.println("ã€é—å˜±åˆçº¦ã€‘");
        System.out.println("å¯†é’¥è·¯å¾„: Aliceå•ç­¾");
        System.out.println("è„šæœ¬1: 1å¹´åBobç»§æ‰¿");
        System.out.println("è„šæœ¬2: Alice+Bobè”åˆ");

        System.out.println("\nã€æ‰˜ç®¡åˆçº¦ã€‘");
        System.out.println("å¯†é’¥è·¯å¾„: ä¹°æ–¹+å–æ–¹");
        System.out.println("è„šæœ¬1: ä¹°æ–¹+ä»²è£æ–¹");
        System.out.println("è„šæœ¬2: å–æ–¹+ä»²è£æ–¹");
        System.out.println("è„šæœ¬3: 14å¤©åå–æ–¹é€€æ¬¾");

        System.out.println("\nã€DAOé‡‘åº“ã€‘");
        System.out.println("å¯†é’¥è·¯å¾„: æ‰€æœ‰æˆå‘˜èšåˆ");
        System.out.println("è„šæœ¬1: 5-of-9ç†äº‹ä¼š");
        System.out.println("è„šæœ¬2: 30å¤©åä»»ä½•äºº+æ—¶é—´é”");
    }
}
```

## æ€»ç»“

### æ ¸å¿ƒè¦ç‚¹

âœ… **Bitcoin Script**
- åŸºäºæ ˆçš„è„šæœ¬è¯­è¨€
- éå›¾çµå®Œå¤‡
- ç¡®å®šæ€§æ‰§è¡Œ
- é€‚åˆç®€å•åˆçº¦

âœ… **æ ‡å‡†æ¨¡å¼**
- P2PKH: å•ç­¾
- P2SH: éšè—è„šæœ¬
- P2WPKH/P2WSH: SegWit
- P2TR: Taproot

âœ… **é«˜çº§åº”ç”¨**
- æ—¶é—´é”ï¼šCLTV, CSV
- HTLCï¼šåŸå­äº¤æ¢
- DLCï¼šé¢„è¨€æœºåˆçº¦
- RGBï¼šå®¢æˆ·ç«¯éªŒè¯

âœ… **å‘å±•æ–¹å‘**
- Taprootè„šæœ¬æ ‘
- Schnorrèšåˆ
- å®¢æˆ·ç«¯éªŒè¯
- Layer 2é›†æˆ

### èƒ½åŠ›è¾¹ç•Œ

**æ¯”ç‰¹å¸å¯ä»¥ï¼š**
- âœ“ å¤šç­¾
- âœ“ æ—¶é—´é”
- âœ“ å“ˆå¸Œé”
- âœ“ ç®€å•æ¡ä»¶é€»è¾‘

**æ¯”ç‰¹å¸ä¸æ“…é•¿ï¼š**
- âœ— å¤æ‚è®¡ç®—
- âœ— å¾ªç¯
- âœ— é“¾ä¸Šå­˜å‚¨å¤§é‡æ•°æ®
- âœ— åŠ¨æ€çŠ¶æ€

**è§£å†³æ–¹æ¡ˆï¼š**
- Layer 2ï¼ˆé—ªç”µç½‘ç»œï¼‰
- ä¾§é“¾ï¼ˆRSKï¼‰
- å®¢æˆ·ç«¯éªŒè¯ï¼ˆRGBï¼‰

---

**ç›¸å…³æ–‡æ¡£ï¼š**
- [æ¯”ç‰¹å¸è„šæœ¬è¯­è¨€è¯¦è§£](./09.æ¯”ç‰¹å¸è„šæœ¬è¯­è¨€è¯¦è§£.md)
- [é—ªç”µç½‘ç»œåŸç†è¯¦è§£](./08.é—ªç”µç½‘ç»œåŸç†è¯¦è§£.md)
- [æ¯”ç‰¹å¸æ‰©å±•æ–¹æ¡ˆ](./20.æ¯”ç‰¹å¸æ‰©å±•æ–¹æ¡ˆ.md)

æ¯”ç‰¹å¸æ™ºèƒ½åˆçº¦è™½ç„¶ç®€å•ï¼Œä½†é€šè¿‡å·§å¦™è®¾è®¡å¯ä»¥å®ç°å¼ºå¤§åŠŸèƒ½ï¼ğŸ”§
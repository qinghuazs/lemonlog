# LangChain 概念指导

本指南提供了 LangChain 框架和更广泛的 AI 应用程序背后关键概念的解释。

我们建议您在深入概念指南之前至少完成一个[教程](https://python.langchain.com/docs/tutorials/)。这将提供实用的上下文，使您更容易理解这里讨论的概念。

概念指南不涵盖分步说明或具体实现示例——这些可以在[操作指南](https://python.langchain.com/docs/how_to/)和[教程](https://python.langchain.com/docs/tutorials/)中找到。有关详细的参考资料，请参阅 [API 参考](https://python.langchain.com/api_reference/)。

## 高层概念

- **[为什么选择 LangChain？](https://python.langchain.com/docs/concepts/why/)**：LangChain 提供的价值概述。
- **[架构](https://python.langchain.com/docs/concepts/architecture/)**：LangChain 生态系统中包的组织方式。

## 核心概念

### 模型与交互

- **[聊天模型](https://python.langchain.com/docs/concepts/chat_models/)**：通过聊天 API 公开的 LLM，处理消息序列作为输入并输出消息。
- **[消息](https://python.langchain.com/docs/concepts/messages/)**：聊天模型中的通信单元，用于表示模型输入和输出。
- **[聊天历史](https://python.langchain.com/docs/concepts/chat_history/)**：表示为消息序列的对话，在用户消息和模型响应之间交替。
- **[工具](https://python.langchain.com/docs/concepts/tools/)**：具有关联模式的函数，定义函数的名称、描述和它接受的参数。
- **[工具调用](https://python.langchain.com/docs/concepts/tool_calling/)**：一种聊天模型 API 类型，接受工具模式和消息作为输入，并返回这些工具的调用作为输出消息的一部分。
- **[结构化输出](https://python.langchain.com/docs/concepts/structured_outputs/)**：使聊天模型以结构化格式（如匹配给定模式的 JSON）响应的技术。
- **[记忆](https://python.langchain.com/docs/concepts/memory/)**：关于对话的信息，被持久化以便在未来的对话中使用。
- **[多模态](https://python.langchain.com/docs/concepts/multimodality/)**：处理不同形式数据（如文本、音频、图像和视频）的能力。

### 框架基础

- **[可运行接口](https://python.langchain.com/docs/concepts/runnables/)**：许多 LangChain 组件和 LangChain 表达式语言构建的基础抽象。
- **[流式传输](https://python.langchain.com/docs/concepts/streaming/)**：LangChain 流式传输 API，用于在生成结果时显示结果。
- **[LangChain 表达式语言（LCEL）](https://python.langchain.com/docs/concepts/lcel/)**：用于编排 LangChain 组件的语法。对于较简单的应用程序最有用。

### 数据处理与检索

- **[文档加载器](https://python.langchain.com/docs/concepts/document_loaders/)**：将源加载为文档列表。
- **[检索](https://python.langchain.com/docs/concepts/retrieval/)**：信息检索系统可以响应查询从数据源检索结构化或非结构化数据。
- **[文本分割器](https://python.langchain.com/docs/concepts/text_splitters/)**：将长文本分割为可以单独索引的较小块，以实现细粒度检索。
- **[嵌入模型](https://python.langchain.com/docs/concepts/embedding_models/)**：在向量空间中表示文本或图像等数据的模型。
- **[向量存储](https://python.langchain.com/docs/concepts/vectorstores/)**：向量和相关元数据的存储和高效搜索。
- **[检索器](https://python.langchain.com/docs/concepts/retrievers/)**：响应查询从知识库返回相关文档的组件。
- **[检索增强生成（RAG）](https://python.langchain.com/docs/concepts/rag/)**：通过将语言模型与外部知识库结合来增强语言模型的技术。

### 高级应用模式

- **[智能体](https://python.langchain.com/docs/concepts/agents/)**：使用语言模型选择要采取的行动序列。智能体可以通过工具与外部资源交互。
- **[提示模板](https://python.langchain.com/docs/concepts/prompt_templates/)**：用于分解模型"提示"（通常是消息序列）静态部分的组件。对于序列化、版本控制和重用这些静态部分很有用。
- **[输出解析器](https://python.langchain.com/docs/concepts/output_parsers/)**：负责接收模型的输出并将其转换为更适合下游任务的格式。输出解析器主要在工具调用和结构化输出普遍可用之前很有用。
- **[少样本提示](https://python.langchain.com/docs/concepts/few_shot_prompting/)**：通过在提示中提供要执行任务的几个示例来改善模型性能的技术。
- **[示例选择器](https://python.langchain.com/docs/concepts/example_selectors/)**：用于根据给定输入从数据集中选择最相关示例。示例选择器用于少样本提示中为提示选择示例。

### 开发与部署

- **[异步编程](https://python.langchain.com/docs/concepts/async/)**：在异步上下文中使用 LangChain 应该了解的基础知识。
- **[回调](https://python.langchain.com/docs/concepts/callbacks/)**：回调使内置组件中能够执行自定义辅助代码。回调用于从 LangChain 中的 LLM 流式传输输出、跟踪应用程序的中间步骤等。
- **[跟踪](https://python.langchain.com/docs/concepts/tracing/)**：记录应用程序从输入到输出所采取步骤的过程。跟踪对于调试和诊断复杂应用程序中的问题至关重要。
- **[评估](https://python.langchain.com/docs/concepts/evaluation/)**：评估 AI 应用程序性能和有效性的过程。这涉及根据一组预定义标准或基准测试模型的响应，以确保它满足所需的质量标准并实现预期目的。此过程对于构建可靠的应用程序至关重要。
- **[测试](https://python.langchain.com/docs/concepts/testing/)**：验证集成或应用程序的组件按预期工作的过程。测试对于确保应用程序行为正确以及代码库的更改不会引入新错误至关重要。

## 术语表

### 核心术语

- **AIMessageChunk**：来自 AI 消息的部分响应。在从聊天模型流式传输响应时使用。
- **AIMessage**：表示来自 AI 模型的完整响应。
- **astream_events**：从 LCEL 链流式传输细粒度信息。
- **BaseTool**：LangChain 中所有工具的基类。
- **batch**：用于使用批量输入执行可运行对象。
- **bind_tools**：允许模型与工具交互。
- **缓存**：存储结果以避免对聊天模型的冗余调用。
- **聊天模型**：处理消息序列并返回消息的模型。

### 技术概念

- **嵌入**：文本或其他数据的数值向量表示。
- **向量相似性**：衡量两个向量在向量空间中相似程度的度量。
- **语义搜索**：基于含义而非关键词匹配的搜索技术。
- **上下文窗口**：模型可以处理的最大输入长度。
- **令牌**：模型处理的文本的最小单位。
- **温度**：控制模型输出随机性的参数。
- **Top-k 采样**：从概率最高的 k 个令牌中选择的采样方法。
- **Top-p 采样**：从累积概率达到 p 的令牌中选择的采样方法。

### 应用模式

- **链式调用**：将多个组件连接起来形成处理管道。
- **并行处理**：同时执行多个操作以提高效率。
- **条件分支**：根据条件选择不同的处理路径。
- **循环处理**：重复执行某些操作直到满足条件。
- **错误处理**：处理和恢复处理过程中的错误。
- **状态管理**：在多轮交互中维护应用程序状态。
